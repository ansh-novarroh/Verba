(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{20221:function(e,t,l){Promise.resolve().then(l.bind(l,44685))},44685:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return e6}});var s=l(57437),a=l(2265),n=l(9881),r=l(58177),o=l(8603),i=l(95183),c=l(50670),d=l.n(c),x=l(72810),u=l.n(x),m=l(5117),g=l.n(m),f=l(58146),p=l.n(f);let h={Inter:d(),Plus_Jakarta_Sans:u(),Open_Sans:g(),PT_Mono:p()},b=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")},v=e=>{let t=e||document.activeElement;t&&t instanceof HTMLElement&&t.blur()},j=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/import_files")};var w=e=>{let{title:t="",key:l="Button"+t,Icon:a,onClick:n=()=>{},onMouseEnter:r=()=>{},onMouseLeave:o=()=>{},disabled:i=!1,className:c="",text_class_name:d="",selected:x=!1,selected_color:u="bg-button-verba",selected_text_color:m="text-text-verba-button",text_size:g="text-xs",icon_size:f=12,type:p="button",loading:h=!1,circle:b=!1,onClickParams:v=[]}=e;return(0,s.jsx)("button",{type:p,className:c+" p-3 transition-all active:scale-95 scale-100 duration-300 flex gap-1 items-center justify-center ".concat(b?"rounded-full":"rounded-lg"," hover:bg-button-hover-verba hover:text-text-verba-button ").concat(x?u+" shadow-md "+m:" bg-button-verba text-text-alt-verba-button"," "),onClick:e=>n(e,...v),disabled:i,onMouseEnter:r,onMouseLeave:o,children:h?(0,s.jsx)("span",{className:"text-text-verba-button loading loading-spinner loading-xs"}):(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)(a,{size:f,className:"w-[20px]"}),t&&(0,s.jsx)("p",{title:t,className:g+" "+d,children:t})]})},l)},N=e=>{let{Icon:t,title:l,currentPage:a,setPage:n,setCurrentPage:r,hide:o}=e;return(0,s.jsx)(w,{title:l,Icon:t,selected_color:"bg-primary-verba",selected:a===n,onClick:()=>{r(n)},disabled:o})};async function y(){try{let e=await fetch("https://api.github.com/repos/weaviate/verba",{method:"GET"}),t=await e.json();if(t)return t.stargazers_count;return 0}catch(e){return console.error("Failed to perform search:",e),0}}let _=e=>e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString();var S=e=>{let{imageSrc:t,title:l,subtitle:n,currentPage:c,setCurrentPage:d,production:x}=e,[u,m]=(0,a.useState)("0");return(0,a.useEffect)(()=>{(async()=>{try{let e=await y();if(e){let t=_(e);m(t)}}catch(e){console.error("Failed to fetch GitHub stars:",e)}})()},[]),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,s.jsx)("img",{src:t,className:"flex rounded-lg w-[60px] object-contain [filter:drop-shadow(0_4px_3px_rgb(0_0_0_/0.07))_drop-shadow(0_2px_2px_rgb(0_0_0_/0.06))]"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-text-verba",children:l}),(0,s.jsx)("p",{className:"text-sm  text-text-alt-verba font-light",children:n})]}),(0,s.jsx)("div",{className:"flex md:hidden flex-col items-center gap-3 justify-between",children:(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)(w,{Icon:i.QQh,title:"Menu"}),(0,s.jsxs)("ul",{tabIndex:0,className:"dropdown-content dropdown-left z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"CHAT"===c?"font-bold":"",onClick:()=>{d("CHAT"),v()},children:"Chat"})},"Menu Button1"),(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"DOCUMENTS"===c?"font-bold":"",onClick:()=>{d("DOCUMENTS"),v()},children:"Documents"})},"Menu Button2"),"Demo"!=x&&(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"ADD"===c?"font-bold":"",onClick:()=>{d("ADD"),v()},children:"Import Data"})},"Menu Button4"),"Demo"!=x&&(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"SETTINGS"===c?"font-bold":"",onClick:()=>{d("SETTINGS"),v()},children:"Settings"})},"Menu Button5")]})]})})]}),(0,s.jsx)("div",{className:"flex flex-row justify-center items-center",children:(0,s.jsxs)("div",{className:"hidden md:flex flex-row items-center gap-3 justify-between",children:[(0,s.jsx)(N,{hide:!1,Icon:r.utr,title:"Chat",currentPage:c,setCurrentPage:d,setPage:"CHAT"}),"Demo"!=x&&(0,s.jsx)(N,{hide:!1,Icon:o.Lgw,title:"Import Data",currentPage:c,setCurrentPage:d,setPage:"ADD"}),(0,s.jsx)(N,{hide:!1,Icon:r.emU,title:"Documents",currentPage:c,setCurrentPage:d,setPage:"DOCUMENTS"}),"Demo"!=x&&(0,s.jsx)(N,{hide:!1,Icon:r.zfW,title:"Settings",currentPage:c,setCurrentPage:d,setPage:"SETTINGS"})]})})]})},C=l(14063),k=l(68842),E=l(33149),I=l(26547),D=l(20789),R=l(77954),O=l(97776),A=l(65125),T=l(71375);let F=["green","blue","red","yellow","purple","cyan","orange","limegreen","pink","teal","violet","forestgreen","gold","navy","magenta","mediumspringgreen","darkorange","deepskyblue","crimson","lightseagreen","royalblue","chartreuse","mediumorchid","aqua","orangered","mediumaquamarine","plum","lime","dodgerblue","lightcoral","mediumslateblue","lightgreen","darkred","springgreen","lightpink","indigo","lightyellow","mediumvioletred","seagreen","fuchsia","darkseagreen","thistle","orange","powderblue","yellowgreen","cornflowerblue","darkmagenta","darkblue","gold","mediumblue","rosybrown","darkgreen","lightskyblue","mediumseagreen","firebrick","lavender","darkcyan","khaki","mediumturquoise","saddlebrown","lightblue","olive","mintcream","turquoise","rebeccapurple","lightgoldenrodyellow"];function M(e,t,l){return l===t?0:(e-t)/(l-t)}let L=async e=>{try{return(await fetch(e)).ok}catch(t){return console.error("Failed to fetch from ".concat(e,":"),t),!1}},z=async()=>{if(await L("http://localhost:8000/api/health"))return"http://localhost:8000";if(await L("/api/health"))return window.location.origin;throw Error("Both health checks failed, please check the Verba Server")},P=async e=>{try{let t=await z(),l=await fetch("".concat(t).concat(e),{method:"GET"}),s=await l.json();return s||console.warn("Could not retrieve data from ".concat(e)),s}catch(t){return console.error("Failed to fetch data from ".concat(e,":"),t),null}},G=()=>P("/api/health"),J=async(e,t,l,s)=>{let a=await z(),n=await fetch("".concat(a,"/api/connect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:{deployment:e,url:t,key:l},port:s})});return await n.json()},B=async e=>{try{let t=await z(),l=await fetch("".concat(t,"/api/get_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await l.json()}catch(e){return console.error("Error retrieving content",e),null}},U=async(e,t)=>{if(!e)return!1;try{let l=await z(),s=await fetch("".concat(l,"/api/set_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rag_config:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error setting config:",e),!1}},W=async(e,t,l)=>{try{let s=await z(),a=await fetch("".concat(s,"/api/set_theme_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themes:e,theme:t,credentials:l})});return 200===a.status}catch(e){return console.error("Error setting config:",e),!1}},V=async(e,t,l,s,a)=>{try{let n=await z(),r=await fetch("".concat(n,"/api/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,RAG:t,labels:l,documentFilter:s,credentials:a})});return await r.json()}catch(e){return console.error("Error sending query",e),null}},q=async(e,t)=>{if(!e)return null;try{let l=await z(),s=await fetch("".concat(l,"/api/get_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return await s.json()}catch(e){return console.error("Error retrieving selected document",e),null}},H=async(e,t,l)=>{try{let s=await z(),a=await fetch("".concat(s,"/api/get_datacount"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embedding_model:e,documentFilter:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},Y=async e=>{try{let t=await z(),l=await fetch("".concat(t,"/api/get_labels"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await l.json()}catch(e){return console.error("Error retrieving content",e),null}},K=async(e,t,l,s)=>{if(!e)return null;try{let a=await z(),n=await fetch("".concat(a,"/api/get_content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,chunkScores:l,credentials:s})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},X=async(e,t,l)=>{if(!e)return null;try{let s=await z(),a=await fetch("".concat(s,"/api/get_vectors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,showAll:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},$=async(e,t)=>{if(!e)return null;try{let l=await z(),s=await fetch("".concat(l,"/api/get_summary"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return await s.json()}catch(e){return console.error("Error retrieving content",e),null}},Z=async(e,t,l,s)=>{if(!e)return null;try{let a=await z(),n=await fetch("".concat(a,"/api/get_chunks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,pageSize:l,credentials:s})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},Q=async(e,t,l)=>{if(!e)return null;try{let s=await z(),a=await fetch("".concat(s,"/api/get_chunk"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,embedder:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},ee=async(e,t,l,s,a)=>{try{let n=await z(),r=await fetch("".concat(n,"/api/get_all_documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,labels:t,page:l,pageSize:s,credentials:a})});return await r.json()}catch(e){return console.error("Error retrieving all documents",e),null}},et=async(e,t)=>{try{let l=await z(),s=await fetch("".concat(l,"/api/delete_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting document",e),!1}},el=async(e,t)=>{try{let l=await z(),s=await fetch("".concat(l,"/api/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting all documents",e),!1}},es=async e=>{try{let t=await z(),l=await fetch("".concat(t,"/api/get_meta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await l.json()}catch(e){return console.error("Error retrieving selected document",e),null}},ea=async(e,t,l)=>{try{let s=await z(),a=await fetch("".concat(s,"/api/get_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,limit:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving suggestions",e),null}},en=async(e,t)=>{try{let l=await z(),s=await fetch("".concat(l,"/api/delete_suggestion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting suggestion",e),!1}},er=async(e,t,l)=>{try{let s=await z(),a=await fetch("".concat(s,"/api/get_all_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:e,pageSize:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving all suggestions",e),null}};(0,k.e)({OrbitControls:I.z});let eo=e=>{let{vector:t,color:l,setHoverTitle:n,documentTitle:r,multiplication:o,dynamicColor:i,chunk_id:c,chunk_uuid:d,setSelectedChunk:x,selectedChunk:u,minX:m,maxX:g,minY:f,maxY:p,minZ:h,maxZ:b,chunkScores:v}=e,j=(0,a.useRef)(null),w=(0,a.useRef)(!1),N=(0,a.useMemo)(()=>null==v?void 0:v.some(e=>e.uuid===d),[v,d]),y=(0,a.useMemo)(()=>N?new O.Color("yellow"):u===d?new O.Color("green"):i?function(e,t,l,s,a,n,r){let o=M(e.x,t,l),i=M(e.y,s,a),c=M(e.z,n,r);return new O.Color("rgb(".concat(Math.floor(255*o),",").concat(Math.floor(255*i),",").concat(Math.floor(255*c),")"))}(t,m,g,f,p,h,b):new O.Color(l),[N,u,d,i,l,t,m,g,f,p,h,b]),_=N?3:u===d?1.5:1,S=N?1:w.current?1:.5,C=(0,a.useCallback)(()=>{w.current=!0,n.current("".concat(r," | ").concat(c))},[r,c,n]),E=(0,a.useCallback)(()=>{w.current=!1,n.current(null)},[n]),I=(0,a.useCallback)(()=>{x(d)},[d,x]);return(0,k.C)(()=>{if(j.current){j.current.position.lerp(new O.Vector3(t.x*o,t.y*o,t.z*o),.02);let e=j.current.material;e.color.set(w.current?"blue":y),e.opacity=w.current?1:S,e.transparent=!w.current}}),(0,s.jsx)(D.b,{rotationIntensity:.2,children:(0,s.jsxs)("mesh",{ref:j,position:[0,0,0],onPointerEnter:C,onPointerLeave:E,onClick:I,children:[(0,s.jsx)("sphereGeometry",{args:[_,32,32]}),(0,s.jsx)("meshBasicMaterial",{color:y,opacity:S,transparent:!0})]})})};var ei=e=>{let{credentials:t,selectedDocument:l,production:n,chunkScores:r}=e;(0,a.useRef)([]);let[o,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[x,u]=(0,a.useState)(""),[m,g]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!0),[h,b]=(0,a.useState)(null),v=(0,a.useRef)(e=>b(e)),[j,w]=(0,a.useState)(200),[N,y]=(0,a.useState)(0),[_,S]=(0,a.useState)(null),[C,k]=(0,a.useState)(null),[D,O]=(0,a.useState)(-1),[M,L]=(0,a.useState)(1),[z,P]=(0,a.useState)(-1),[G,J]=(0,a.useState)(1),[B,U]=(0,a.useState)(-1),[W,V]=(0,a.useState)(1);function q(e){return{min:Math.min(...e),max:Math.max(...e)}}(0,a.useEffect)(()=>{l?Y():d([])},[m,l]),(0,a.useEffect)(()=>{_?H():k(null)},[_]);let H=async()=>{try{let e=await Q(_,x,t);e&&(""!==e.error?(console.error(e.error),k(null)):k(e.chunk))}catch(e){console.error("Failed to fetch document:",e),i(!1)}},Y=async()=>{try{i(!0);let e=await X(l,m,t);if(e){if(""!==e.error)console.error(e.error),i(!1),d([]),y(0),u("None");else if(d(e.vector_groups.groups),u(e.vector_groups.embedder),y(e.vector_groups.dimensions),i(!1),!m){let t=e.vector_groups.groups[0].chunks.map(e=>e.vector.x),l=e.vector_groups.groups[0].chunks.map(e=>e.vector.y),s=e.vector_groups.groups[0].chunks.map(e=>e.vector.z),{min:a,max:n}=q(t);O(a),L(n);let{min:r,max:o}=q(l);P(r),J(o);let{min:i,max:c}=q(s);U(i),V(c)}}}catch(e){console.error("Failed to fetch document:",e),i(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 h-full w-full",children:[(0,s.jsx)("div",{className:"flex justify-end w-full gap-2 items-center",children:(0,s.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[o&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2 h-full",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-xs lg:loading-sm"})}),(0,s.jsx)("p",{className:"text-text-alt-verba text-xs lg:text-sm font-bold",children:"Embedding Model:"}),(0,s.jsx)("p",{className:"text-text-alt-verba text-xs lg:text-sm",children:x})]}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-xs lg:text-sm font-bold",children:"Hover:"}),(0,s.jsx)("p",{className:"text-xs lg:text-sm text-text-alt-verba truncate max-w-[100px] lg:max-w-[300px]",title:null!=h?h:"",children:null!=h?h:""})]}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-xs lg:text-sm font-bold",children:"Vectors:"}),(0,s.jsxs)("p",{className:"text-xs lg:text-sm text-text-alt-verba",children:[c.length," x ",(()=>{let e=0;for(let t of c)e+=t.chunks.length;return e})()," x ",N]})]})]}),(0,s.jsxs)("div",{className:"flex gap-10 items-center justify-between min-w-[20vw]",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:["Demo"!=n&&(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Show All Documents"}),(0,s.jsx)("input",{type:"checkbox",className:"toggle",checked:m,onChange:e=>{g(e.target.checked)}})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Dynamic Coloring"}),(0,s.jsx)("input",{type:"checkbox",className:"toggle",checked:f,onChange:e=>{p(e.target.checked)}})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex w-full justify-start items-center",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:!0,className:"btn btn-sm bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(T.WMq,{size:15}),(0,s.jsx)("p",{children:"PCA"})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-sm",children:"Zoom"}),(0,s.jsx)("input",{onChange:e=>{w(Number(e.target.value))},type:"range",min:0,max:"1000",value:j,className:"range range-xs grow w-full"})]})]}),C&&(0,s.jsx)("button",{onClick:()=>{k(null),S(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,s.jsx)(A.B4e,{size:15})})]})]})}),(0,s.jsxs)("div",{className:"flex gap-5 h-[45vh] w-full",children:[(0,s.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(_?"w-2/3":"w-full"," h-full"),children:(0,s.jsxs)(E.Xz,{children:[(0,s.jsx)("ambientLight",{intensity:1}),(0,s.jsx)(I.z,{}),(0,s.jsx)(R.c,{makeDefault:!0,position:[0,0,150]}),(0,s.jsx)("axesHelper",{args:[50]}),c.map((e,t)=>e.chunks.map((l,a)=>(0,s.jsx)(eo,{dynamicColor:f,multiplication:j,vector:l.vector,color:function(e){if(!(e>=F.length))return F[e];{let e=Math.floor(Math.random()*F.length);return F[e]}}(t),setHoverTitle:v,documentTitle:e.name,chunk_id:l.chunk_id,setSelectedChunk:S,selectedChunk:_,chunk_uuid:l.uuid,minX:D,minY:z,minZ:B,maxX:M,maxY:G,maxZ:W,chunkScores:r},"Sphere_"+a+e.name)))]})}),(0,s.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(_?"w-1/3 opacity-100":"w-0 opacity-0"," overflow-auto"),children:C&&(0,s.jsxs)("div",{className:"flex flex-col p-3 gap-2 w-full",children:[(0,s.jsxs)("p",{className:"text-text-alt-verba fond-bold",children:["Chunk ",C.chunk_id]}),(0,s.jsx)("p",{className:"text-text-alt-verba text-sm",children:C.content})]})})]})]})},ec=l(13921),ed=l(7395),ex=l(38666),eu=e=>{let{selectedDocument:t,credentials:l,selectedTheme:n}=e,[o,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[x,u]=(0,a.useState)(1),[m,g]=(0,a.useState)(0),[f,p]=(0,a.useState)(!0);(0,a.useEffect)(()=>{v(x),p(1===x&&0===m)},[x,m]),(0,a.useEffect)(()=>{v(1),g(0),p(1===x&&0===m)},[t]);let h=async()=>{m===c.length-1?(await v(x+1)?u(e=>e+1):(await v(1),u(1)),g(0)):g(e=>e+1)},b=async()=>{if(0===m){if(x>1){let e=x-1;await v(e)&&(u(e),g(9))}else{let e=x,t=!0;for(;t;)(t=await v(e+1))&&e++;await v(e),u(e),g(c.length-1)}}else g(e=>e-1)},v=async e=>{try{i(!0);let s=await Z(t,e,10,l);if(s){if(""===s.error)return d(s.chunks),i(!1),s.chunks.length>0;console.error(s.error),i(!1),d([])}return!1}catch(e){return console.error("Failed to fetch document:",e),i(!1),!1}};return 0==c.length?(0,s.jsx)("div",{children:o&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-verba gap-2 h-full",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})})}):(0,s.jsx)("div",{className:"flex flex-col h-full",children:c.length>0&&(0,s.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsxs)("div",{className:"flex-grow overflow-hidden p-3",children:[(0,s.jsx)("div",{className:"flex justify-between mb-2",children:(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,s.jsx)(r.$Kz,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",c[m].chunk_id]})]})})}),(0,s.jsx)("div",{className:"overflow-y-auto h-[calc(100%-3rem)]",children:(0,s.jsx)(ec.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:l,className:a,children:r,...o}=e,i=/language-(\w+)/.exec(a||"");return!l&&i?(0,s.jsx)(ed.Z,{style:"dark"===n.theme?ex.vk:ex.Yn,language:i[1],PreTag:"div",...o,children:String(r).replace(/\n$/,"")}):(0,s.jsx)("code",{className:a,...o,children:r})}},children:c[m].content})})]}),c.length>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-verba",children:[(0,s.jsx)(w,{title:"Previous Chunk",onClick:b,className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",disabled:f,Icon:C.O18}),(0,s.jsx)(w,{title:"Next Chunk",onClick:h,className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:C.Rdr})]})]})})},em=e=>{let{selectedDocument:t,credentials:l,selectedTheme:n}=e,[o,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[x,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{t&&m()},[t]);let m=async()=>{try{i(!0),u(null);let s=await $(t,l);if(null==s?void 0:s.error)u(s.error),d(null);else{var e;console.log(s),d(null!==(e=null==s?void 0:s.summary)&&void 0!==e?e:"No summary available.")}}catch(e){console.error("Failed to fetch summary:",e),u("Error fetching summary.")}finally{i(!1)}};return(0,s.jsx)("div",{className:"flex flex-col h-full",children:(0,s.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsx)("div",{className:"flex justify-between items-center p-3 bg-secondary-verba",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(r.$Kz,{size:18}),(0,s.jsx)("h2",{className:"text-lg font-bold text-text-verba",children:"Document Summary"})]})}),(0,s.jsx)("div",{className:"flex-grow flex flex-col p-3",children:o?(0,s.jsx)("div",{className:"flex items-center justify-center text-text-verba gap-2 flex-grow",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})}):x?(0,s.jsx)("p",{className:"text-red-500 flex-grow flex items-center justify-center",children:x}):(0,s.jsx)("div",{className:"flex-grow relative",children:(0,s.jsx)("div",{className:"absolute inset-0 overflow-y-auto bg-gray-100 p-4 rounded-md",children:(0,s.jsx)(ec.D,{className:"prose prose-lg text-gray-700 break-words",children:null!=c?c:""})})})})]})})},eg=e=>{let{tooltip_text:t,display_text:l}=e,[n,r]=(0,a.useState)(!1);return(0,s.jsx)("div",{className:"items-center gap-2 flex",children:(0,s.jsxs)("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:"relative cursor-pointer flex flex-col items-center text-text-alt-verba",children:[(0,s.jsx)("p",{className:"text-sm ml-3",children:l}),(0,s.jsx)("div",{className:"absolute top-full left-full mt-2 z-30 p-4 bg-bg-verba text-text-alt-verba text-xs rounded-xl shadow-md w-[300px] transition-opacity duration-300 ".concat(n?"opacity-100":"opacity-0 pointer-events-none"),children:(0,s.jsx)("p",{className:"w-full text-xs whitespace-normal",children:t})})]})})},ef=e=>{let{selectedDocument:t,credentials:l}=e,[n,r]=(0,a.useState)(!0),[o,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{c()},[t]);let c=async()=>{try{r(!0);let e=await q(t,l);e&&(""!==e.error?i(null):i(e.document),r(!1))}catch(e){console.error("Failed to fetch document:",e),r(!1)}};return(0,s.jsx)("div",{className:"flex flex-col h-full",children:n?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-md text-text-verba bg-text-alt-verba"})}):o&&(0,s.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Title"}),(0,s.jsx)("p",{className:"text-text-verba truncate max-w-full",title:o.title,children:o.title})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Metadata"}),(0,s.jsx)("p",{className:"text-text-verba max-w-full",children:o.metadata})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Extension"}),(0,s.jsx)("p",{className:"text-text-verba max-w-full",children:o.extension})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"File Size"}),(0,s.jsx)("p",{className:"text-text-verba max-w-full",children:o.fileSize})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Source"}),(0,s.jsx)("button",{className:"text-text-verba truncate max-w-full",onClick:()=>window.open(o.source,"_blank"),title:o.source,children:o.source})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:"Labels"}),(0,s.jsx)("p",{className:"text-text-verba max-w-full",children:o.labels})]})]})})},ep=l(25847),eh=l(21794),eb=e=>{let{document:t,selectedDocument:l,selectedTheme:n,credentials:o,chunkScores:i}=e,[c,d]=(0,a.useState)(!0),[x,u]=(0,a.useState)(1),[m,g]=(0,a.useState)(1),[f,p]=(0,a.useState)([]),h=(0,a.useRef)(null);(0,a.useEffect)(()=>{t?(b(),u(1)):(p([]),u(1),g(1))},[t,i]),(0,a.useEffect)(()=>{t?b():(p([]),u(1),g(1))},[x]),(0,a.useEffect)(()=>{if(i&&i.length>0){var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}},[f,i]);let b=async()=>{try{d(!0);let e=await K(l,x,i||[],o);e&&(""!==e.error?(p([{content:e.error,chunk_id:0,score:0,type:"text"}]),u(1),g(1)):(p(e.content),g(e.maxPage)),d(!1))}catch(e){console.error("Failed to fetch content from document:",e),d(!1)}},v=(e,t)=>"text"===e.type?(0,s.jsx)("div",{className:"flex p-2",ref:i?null:h,children:(0,s.jsx)(ec.D,{className:"max-w-[50vw] items-center justify-center flex-wrap prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:l,className:a,children:r,...o}=e,i=/language-(\w+)/.exec(a||"");return!l&&i?(0,s.jsx)(ed.Z,{style:"dark"===n.theme?ex.vk:ex.Yn,language:i[1],PreTag:"div",...o,children:String(r).replace(/\n$/,"")}):(0,s.jsx)("code",{className:a,...o,children:r})}},children:e.content})},"CONTENT_SNIPPET"+t):(0,s.jsxs)("div",{className:"flex p-2 border-2 flex-col gap-2 border-secondary-verba shadow-lg rounded-3xl",ref:h,children:[(0,s.jsx)("div",{className:"flex justify-between",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,s.jsx)(eh.dvR,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"Context Used"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,s.jsx)(r.$Kz,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",e.chunk_id+1]})]}),e.score>0&&(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-primary-verba rounded-full w-fit",children:[(0,s.jsx)(eh.dvR,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-verba",children:"High Relevancy"})]})]})}),(0,s.jsx)(ec.D,{className:"w-full items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:l,className:a,children:r,...o}=e,i=/language-(\w+)/.exec(a||"");return!l&&i?(0,s.jsx)(ed.Z,{style:"dark"===n.theme?ex.vk:ex.Yn,language:i[1],PreTag:"div",...o,children:String(r).replace(/\n$/,"")}):(0,s.jsx)("code",{className:a,...o,children:r})}},children:e.content})]});return t?(0,s.jsx)("div",{className:"flex flex-col h-full",children:t&&(0,s.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsx)("div",{className:"p-3 bg-bg-alt-verba",children:(0,s.jsxs)("div",{className:"flex gap-4 w-full justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[c&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-verba gap-2",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,s.jsx)("p",{className:"text-lg font-bold truncate max-w-[350px]",title:t.title,children:t.title})]}),(0,s.jsx)("div",{className:"gap-2 flex flex-wrap",children:Object.entries(t.labels).map(e=>{let[l,a]=e;return(0,s.jsx)(w,{title:a,text_size:"text-xs",text_class_name:"truncate max-w-[200px]",className:"btn-sm min-w-min max-w-[200px]"},t.title+l+a)})})]})}),(0,s.jsx)("div",{className:"flex-grow overflow-hidden p-3",children:(0,s.jsx)("div",{className:"overflow-y-auto h-full",children:f&&f.map((e,t)=>v(e,t))})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-verba",children:[(0,s.jsx)(w,{title:"Previous "+(i?"Chunk":"Page"),onClick:()=>{1==x?u(m):u(e=>e-1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:C.O18}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("p",{className:"text-xs text-text-verba",children:[i?"Chunk ":"Page "," ",x]})}),(0,s.jsx)(w,{title:"Next "+(i?"Chunk":"Page"),onClick:()=>{x==m?u(1):u(e=>e+1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:C.Rdr})]})]})}):(0,s.jsx)("div",{})},ev=e=>{let{credentials:t,selectedDocument:l,setSelectedDocument:n,chunkScores:r,production:i,selectedTheme:c,documentFilter:d,setDocumentFilter:x,addStatusMessage:u}=e,[m,g]=(0,a.useState)("Content"),[f,p]=(0,a.useState)(!1),[h,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{l?j():b(null)},[l]);let v=e=>{window.open(e,"_blank","noopener,noreferrer")},j=async()=>{try{p(!0);let e=await q(l,t);e&&(""!==e.error?(console.error(e.error),p(!1),b(null),n(null)):(b(e.document),p(!1)))}catch(e){console.error("Failed to fetch document:",e),p(!1)}};return l?(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-3 items-center justify-end lg:justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"hidden lg:flex gap-2 justify-start ",children:(0,s.jsx)(eg,{tooltip_text:"Inspect your all information about your document, such as chunks, metadata and more.",display_text:h?h.title:"Loading..."})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)(w,{title:"Content",Icon:A.Vqr,onClick:()=>g("Content"),selected:"Content"===m,selected_color:"bg-secondary-verba"}),(0,s.jsx)(w,{title:"Summary",Icon:A.Fqs,onClick:()=>g("Summary"),selected:"Summary"===m,selected_color:"bg-secondary-verba"}),(0,s.jsx)(w,{title:"Chunks",Icon:A.Fqs,onClick:()=>g("Chunks"),selected:"Chunks"===m,selected_color:"bg-secondary-verba"}),(0,s.jsx)(w,{title:"Vector",Icon:ep.FUn,onClick:()=>g("Vector Space"),selected:"Vector Space"===m,selected_color:"bg-secondary-verba"}),(0,s.jsx)(w,{Icon:A.B4e,onClick:()=>{n(null)}})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["Content"===m&&(0,s.jsx)(eb,{selectedTheme:c,document:h,credentials:t,selectedDocument:l,chunkScores:r}),"Chunks"===m&&(0,s.jsx)(eu,{selectedTheme:c,credentials:t,selectedDocument:l}),"Summary"===m&&(0,s.jsx)(em,{selectedTheme:c,credentials:t,selectedDocument:l}),"Vector Space"===m&&(0,s.jsx)(ei,{credentials:t,selectedDocument:l,chunkScores:r,production:i}),"Metadata"===m&&(0,s.jsx)(ef,{credentials:t,selectedDocument:l})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-3 items-center justify-between h-min w-full",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[d.some(e=>e.uuid===l)&&(0,s.jsx)(w,{title:"Delete from Chat",Icon:A.B4e,selected:!0,selected_color:"bg-warning-verba",onClick:()=>{x(d.filter(e=>e.uuid!==l)),u("Removed document from Chat","INFO")}}),!d.some(e=>e.uuid===l)&&h&&(0,s.jsx)(w,{title:"Add to Chat",Icon:o.Lgw,onClick:()=>{x([...d,{uuid:l,title:h.title}]),u("Added document to Chat","SUCCESS")}})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[l&&h&&h.source&&(0,s.jsx)(w,{title:"Go To Source",Icon:C.CkN,onClick:()=>{v(h.source)}}),(0,s.jsx)(w,{title:"Document Info",Icon:C.DAO,onClick:()=>g("Metadata"),selected:"Metadata"===m,selected_color:"bg-secondary-verba"})]})]})]}):(0,s.jsx)("div",{})},ej=e=>{let{title:t,modal_id:l,text:a,triggerAccept:n,triggerString:r,triggerValue:o}=e;return(0,s.jsx)("dialog",{id:l,className:"modal",children:(0,s.jsxs)("div",{className:"modal-box flex flex-col gap-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:a}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsxs)("form",{method:"dialog",className:"flex gap-2",children:[n&&r&&(0,s.jsx)(w,{type:"submit",title:r,onClick:()=>{n(o)}}),(0,s.jsx)(w,{type:"submit",title:"Cancel",selected_color:"bg-warning-verba",selected:!0})]})})]})})};let ew=e=>{let{label:t,documents:l,onSelectDocument:n,selectedDocument:r,handleDeleteDocument:o,production:i}=e,[c,d]=(0,a.useState)(!1);return(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg bg-gray-200 hover:bg-gray-300",onClick:()=>d(!c),children:[(0,s.jsx)(C.$nz,{className:"text-yellow-500"}),(0,s.jsx)("span",{className:"font-bold",children:t})]}),c&&(0,s.jsx)("ul",{className:"ml-5 border-l border-gray-400 pl-3 space-y-1",children:l.map(e=>(0,s.jsxs)("li",{className:"flex justify-between items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-grow p-2 rounded-lg cursor-pointer bg-gray-100 hover:bg-gray-300 transition ".concat(r===e.uuid?"bg-blue-500 text-black":""),onClick:()=>n(e.uuid),children:[(0,s.jsx)(C.pPO,{className:"text-blue-500"}),(0,s.jsx)("span",{children:e.title})]}),"Demo"!==i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w,{Icon:C.Xm5,className:"max-w-min p-2 rounded-lg bg-gray-200 hover:bg-red-600 hover:text-white transition",onClick:()=>{document.getElementById("remove_document_".concat(e.uuid)).showModal()}}),(0,s.jsx)(ej,{modal_id:"remove_document_".concat(e.uuid),title:"Remove Document",text:"Do you want to remove ".concat(e.title,"?"),triggerString:"Delete",triggerValue:e.uuid,triggerAccept:()=>o(e.uuid)})]})]},e.uuid))})]})};var eN=e=>{let{credentials:t,selectedDocument:l,onSelectDocument:n,production:r}=e,[o,i]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{x()},[]);let x=async()=>{d(!0);try{let e=await ee("",[],1,50,t);e&&!e.error&&i(e.documents)}catch(e){console.error("Error retrieving documents:",e)}d(!1)},u=async e=>{"Demo"!==r&&await et(e,t)&&i(t=>t.filter(t=>t.uuid!==e))},m={};return o.forEach(e=>{e.labels.forEach(t=>{m[t]||(m[t]=[]),m[t].push(e)})}),(0,s.jsx)("div",{className:"text-text-verba",children:c?(0,s.jsx)("p",{children:"Loading documents..."}):(0,s.jsx)("ul",{className:"space-y-2",children:Object.entries(m).map(e=>{let[t,a]=e;return(0,s.jsx)(ew,{label:t,documents:a,onSelectDocument:n,selectedDocument:l,handleDeleteDocument:u,production:r},t)})})})},ey=e=>{let{selectedTheme:t,production:l,credentials:n,addStatusMessage:r}=e,[o,i]=(0,a.useState)(null),[c,d]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async()=>{let e=await ee("",[],1,50,n);(null==e?void 0:e.documents)&&d(e.documents)})()},[n]),(0,s.jsxs)("div",{className:"flex gap-3 h-[80vh] w-full",children:[(0,s.jsxs)("div",{className:"w-1/4 bg-bg-alt-verba rounded-lg p-4 overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-3 text-text-verba",children:"Documents"}),(0,s.jsx)(eN,{credentials:n,selectedDocument:o,onSelectDocument:i,production:l})]}),(0,s.jsx)("div",{className:"w-3/4 flex",children:o?(0,s.jsx)(ev,{production:l,credentials:n,addStatusMessage:r,setSelectedDocument:i,selectedTheme:t,selectedDocument:o,documentFilter:[],setDocumentFilter:()=>{}}):(0,s.jsx)("div",{className:"flex justify-center items-center w-full text-text-verba",children:"Select a document to view details."})})]})};let e_={DONE:"bg-secondary-verba",ERROR:"bg-warning-verba",READY:"bg-button-verba",STARTING:"bg-button-verba",CHUNKING:"bg-button-verba",LOADING:"bg-button-verba",EMBEDDING:"bg-button-verba",INGESTING:"bg-button-verba",NER:"bg-button-verba",EXTRACTION:"bg-button-verba",SUMMARIZING:"bg-button-verba",WAITING:"bg-button-verba"},eS={DONE:"Finished",ERROR:"Failed",READY:"Ready",STARTING:"Importing...",CHUNKING:"Chunking...",LOADING:"Loading...",EMBEDDING:"Embedding...",INGESTING:"Weaviating...",NER:"Extracting NER...",EXTRACTION:"Extraction REL...",SUMMARIZING:"Summarizing...",WAITING:"Uploading..."},eC={theme_name:"Light",title:{text:"vijil.ai",type:"text",description:"Title"},subtitle:{text:"Demo Build",type:"text",description:"Subtitle"},intro_message:{text:"Welcome to vijil.ai RAG Agent",type:"text",description:"First Message"},image:{src:"static/vijilLogo.svg",type:"image",description:"Logo"},primary_color:{color:"#FDFF91",type:"color",description:"Primary"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary"},warning_color:{color:"#FF8399",type:"color",description:"Warning"},bg_color:{color:"#FEF7F7",type:"color",description:"Background"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alt. Background"},text_color:{color:"#161616",type:"color",description:"Text"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alt. Text"},button_text_color:{color:"#161616",type:"color",description:"Button Text"},button_text_alt_color:{color:"#8E8E8E",type:"color",description:"Button Alt. Text"},button_color:{color:"#EFEFEF",type:"color",description:"Button"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover"},font:{value:"Plus_Jakarta_Sans",type:"select",options:["Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],description:"Text Font"},theme:"light"},ek={...eC,theme_name:"Dark",title:{...eC.title,text:"vijil.ai"},subtitle:{...eC.subtitle,text:"Demo Build"},intro_message:{...eC.intro_message,text:"Welcome to vijil.ai RAG Agent"},image:{...eC.image,src:"static/vijilLogo.svg"},primary_color:{...eC.primary_color,color:"#BB86FC"},secondary_color:{...eC.secondary_color,color:"#008F82"},warning_color:{...eC.warning_color,color:"#FF8399"},bg_color:{...eC.bg_color,color:"#202020"},bg_alt_color:{...eC.bg_alt_color,color:"#2F2929"},text_color:{...eC.text_color,color:"#ffffff"},text_alt_color:{...eC.text_alt_color,color:"#999999"},button_text_color:{...eC.button_text_color,color:"#ffffff"},button_text_alt_color:{...eC.button_text_alt_color,color:"#999999"},button_color:{...eC.button_color,color:"#3C3C3C"},button_hover_color:{...eC.button_hover_color,color:"#2C2C2C"},font:{...eC.font,value:"Open_Sans"},theme:"dark"},eE={...eC,theme_name:"WCD",title:{...eC.title,text:"vijil.ai"},subtitle:{...eC.subtitle,text:"Demo Build"},intro_message:{...eC.intro_message,text:"Welcome to vijil.ai RAG Agent"},image:{...eC.image,src:"static/vijilLogo.svg"},primary_color:{...eC.primary_color,color:"#BF40C5"},secondary_color:{...eC.secondary_color,color:"#28395B"},warning_color:{...eC.warning_color,color:"#EA3A31"},bg_color:{...eC.bg_color,color:"#0C1428"},bg_alt_color:{...eC.bg_alt_color,color:"#192136"},text_color:{...eC.text_color,color:"#ffffff"},text_alt_color:{...eC.text_alt_color,color:"#AAAAAA"},button_text_color:{...eC.button_text_color,color:"#ffffff"},button_text_alt_color:{...eC.button_text_alt_color,color:"#AAAAAA"},button_color:{...eC.button_color,color:"#1D253A"},button_hover_color:{...eC.button_hover_color,color:"#313749"},font:{...eC.font,value:"Open_Sans"},theme:"dark"},eI={...eC,theme_name:"Weaviate",title:{...eC.title,text:"vijil.ai"},subtitle:{...eC.subtitle,text:"Demo Build"},intro_message:{...eC.intro_message,text:"Welcome to vijil.ai RAG Agent"},image:{...eC.image,src:"static/vijilLogo.svg"},primary_color:{...eC.primary_color,color:"#9bfc88"},secondary_color:{...eC.secondary_color,color:"#8bffe7"},warning_color:{...eC.warning_color,color:"#f77579"},bg_color:{...eC.bg_color,color:"#FEF7F7"},bg_alt_color:{...eC.bg_alt_color,color:"#ffffff"},text_color:{...eC.text_color,color:"#130C49"},text_alt_color:{...eC.text_alt_color,color:"#929292"},button_text_color:{...eC.button_text_color,color:"#130C49"},button_text_alt_color:{...eC.button_text_alt_color,color:"#929292"},button_color:{...eC.button_color,color:"#eeeeee"},button_hover_color:{...eC.button_hover_color,color:"#7dfffb"},font:{...eC.font,value:"Plus_Jakarta_Sans"},theme:"light"};var eD=e=>{let{fileData:t,fileMap:l,handleDeleteFile:a,selectedFileData:n,setSelectedFileData:r}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:["READY"!=l[t.fileID].status?(0,s.jsxs)("div",{className:"flex gap-2",children:["DONE"!=l[t.fileID].status&&"ERROR"!=l[t.fileID].status&&(0,s.jsx)(w,{title:eS[l[t.fileID].status],className:"w-[120px]"}),"DONE"==l[t.fileID].status&&(0,s.jsx)(w,{title:eS[l[t.fileID].status],Icon:C.FJM,selected:!0,className:"w-[120px]",selected_color:"bg-secondary-verba"}),"ERROR"==l[t.fileID].status&&(0,s.jsx)(w,{title:eS[l[t.fileID].status],Icon:A.vVM,className:"w-[120px]",selected:!0,selected_color:"bg-warning-verba"})]}):(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(w,{title:l[t.fileID].rag_config.Reader.selected,className:"w-[120px]",text_class_name:"truncate w-[100px]"})}),(0,s.jsx)(w,{title:l[t.fileID].filename?l[t.fileID].filename:"No Filename",selected:n===l[t.fileID].fileID,selected_color:"bg-secondary-verba",className:"flex-grow",text_class_name:"truncate max-w-[150px] lg:max-w-[300px]",onClick:()=>{r(t.fileID)}}),(0,s.jsx)(w,{Icon:C.Xm5,onClick:()=>{let e=document.getElementById("remove_file_"+l[t.fileID].filename);e instanceof HTMLDialogElement&&e.showModal()},className:"w-[50px]",selected:n===l[t.fileID].fileID,selected_color:"bg-warning-verba"}),(0,s.jsx)(ej,{modal_id:"remove_file_"+l[t.fileID].filename,title:"Remove File",text:l[t.fileID].isURL?"Do you want to remove the URL?":"Do you want to remove "+l[t.fileID].filename+" from the selection?",triggerString:"Delete",triggerValue:l[t.fileID].fileID,triggerAccept:a})]})},eR=e=>{let{fileMap:t,setFileMap:l,RAGConfig:n,addStatusMessage:r,setRAGConfig:i,selectedFileData:c,setSelectedFileData:d,importSelected:x,socketStatus:u,reconnect:m,importAll:g}=e,f=a.useRef(null);(0,a.useEffect)(()=>{null!==f.current&&(f.current.setAttribute("directory",""),f.current.setAttribute("webkitdirectory",""))},[f]);let p=e=>{l(t=>{if(null===e)return r("Cleared all files","WARNING"),d(null),{};{e===c&&d(null),r("Cleared selected file","WARNING");let l={...t};return delete l[e],l}})},[h,b]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),y=async(e,s)=>{if(e.target.files&&n){let a=e.target.files,o={...t},i=s?j:h;r("Added new files","SUCCESS");for(let e=0;e<a.length;e++){let t=a[e],l=JSON.parse(JSON.stringify(n));i&&(l.Reader.selected=i);let s=t.name,r=t.name;if(r in o){let e=Date.now();r="".concat(r,"_").concat(e)}let c=t.name.split(".").pop()||"",d=await function(e){return new Promise((t,l)=>{let s=new FileReader;s.onload=()=>{t(function(e){let t="",l=new Uint8Array(e),s=l.byteLength;for(let e=0;e<s;e++)t+=String.fromCharCode(l[e]);return btoa(t)}(s.result))},s.onerror=()=>l(s.error),s.readAsArrayBuffer(e)})}(t);o[r]={fileID:r,filename:s,extension:c,status_report:{},source:"",isURL:!1,metadata:"",overwrite:!1,content:d,labels:["Document"],rag_config:l,file_size:S(d),status:"READY"}}l(o),d(Object.keys(o)[0]),e.target.value=""}},_=e=>{if(n){let s={...t},a=JSON.parse(JSON.stringify(n));a.Reader.selected=e;let o=new Date().toISOString();r("Added new URL Job","SUCCESS"),s[o]={fileID:o,filename:"New "+e+" Job",metadata:"",status_report:{},extension:"URL",isURL:!0,source:"",overwrite:!1,content:"",labels:["Document"],rag_config:a,file_size:0,status:"READY"},l(s),d(o)}},S=e=>{let t=e.replace(/\s+/g,"");if(t.length%2!=0)throw Error("Invalid hex string length.");return t.length/2};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-3 items-center justify-end lg:justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"hidden lg:flex gap-2 justify-start ",children:(0,s.jsx)(eg,{tooltip_text:"Upload your data through this interface into Verba. You can select individual files, directories or add URL to fetch data from.",display_text:"File Selection"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center lg:justify-end",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,children:(0,s.jsx)(w,{title:"Files",Icon:o.Lgw,onClick:()=>{var e;return null===(e=document.getElementById("files_upload"))||void 0===e?void 0:e.click()}})}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,l]=e;return"URL"!==l.type}).map(e=>{let[t,l]=e;return(0,s.jsx)("li",{onClick:()=>{var e;b(l.name),null===(e=document.getElementById("files_upload"))||void 0===e||e.click(),v()},children:(0,s.jsx)("a",{children:l.name})},"File_"+l.name+t)})})]}),(0,s.jsx)("input",{id:"files_upload",type:"file",onChange:e=>y(e,!1),className:"hidden",multiple:!0}),(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,children:(0,s.jsx)(w,{title:"Directory",Icon:T.Lec})}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,l]=e;return"URL"!==l.type}).map(e=>{let[t,l]=e;return(0,s.jsx)("li",{onClick:()=>{var e;N(l.name),null===(e=document.getElementById("dir_upload"))||void 0===e||e.click(),v()},children:(0,s.jsx)("a",{children:l.name})},"Dir_"+l.name+t)})})]}),(0,s.jsx)("input",{id:"dir_upload",type:"file",ref:f,onChange:e=>y(e,!0),className:"hidden",multiple:!0}),(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,children:(0,s.jsx)(w,{title:"URL",Icon:o.Lgw})}),(0,s.jsx)("input",{id:"url_upload",type:"file",className:"hidden"}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,l]=e;return"URL"===l.type}).map(e=>{let[t,l]=e;return(0,s.jsx)("li",{onClick:()=>{_(l.name),v()},children:(0,s.jsx)("a",{children:l.name})},"URL_"+l.name+t)})})]})]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col gap-3 p-6 items-center justify-start h-full w-full overflow-auto",children:Object.entries(t).map(e=>{let[l,a]=e;return(0,s.jsx)(eD,{fileData:a,handleDeleteFile:p,selectedFileData:c,setSelectedFileData:d,fileMap:t},"FileComponent_"+l)})}),"ONLINE"===u?(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-3 items-center justify-end h-min w-full",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 justify-end",children:[c&&(0,s.jsx)(w,{title:"Import Selected",Icon:C.Xur,onClick:x}),(0,s.jsx)(w,{title:"Import All",Icon:C.Xur,onClick:g}),(0,s.jsx)(w,{title:"Clear Files",Icon:A.B4e,onClick:()=>{let e=document.getElementById("remove_all_files");e instanceof HTMLDialogElement&&e.showModal()}})]})}):(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-3 items-center justify-end h-min w-full",children:(0,s.jsx)("div",{className:"flex gap-3 justify-end",children:(0,s.jsxs)("button",{onClick:m,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2 items-center",children:[(0,s.jsx)(ep.Nwf,{size:15}),(0,s.jsx)("p",{children:"Reconnecting..."}),(0,s.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})}),(0,s.jsx)(ej,{modal_id:"remove_all_files",title:"Clear all files?",text:"Do you want to clear all files from your selection?",triggerString:"Clear All",triggerValue:null,triggerAccept:p})]})},eO=l(67447),eA=l(88033);let eT=e=>{let{values:t,config_title:l,updateConfig:n,component_name:o,blocked:i}=e,[c,d]=(0,a.useState)(""),[x,u]=(0,a.useState)(t);(0,a.useEffect)(()=>{n(o,l,x)},[x]);let m=e=>{x.includes(e)||(u(t=>[...t,e]),d(""))},g=e=>{x.includes(e)&&u(t=>t.filter(t=>t!==e))};return(0,s.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",disabled:i,value:c,onChange:e=>{d(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),m(c))}})}),(0,s.jsxs)("button",{onClick:()=>{m(c)},disabled:i,className:"btn flex gap-2 bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:[(0,s.jsx)(r.Kth,{size:15}),(0,s.jsx)("p",{children:"Add"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex bg-bg-verba w-full p-2 text-center text-sm text-text-verba justify-between items-center rounded-xl",children:[(0,s.jsx)("div",{className:"flex w-full justify-center items-center overflow-hidden",children:(0,s.jsx)("p",{className:"truncate",title:e,children:e})}),(0,s.jsx)("button",{disabled:i,onClick:()=>{g(e)},className:"btn btn-sm btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba ml-2",children:(0,s.jsx)(C.Xm5,{size:12})})]},e+t))})]})};var eF=e=>{let{RAGConfig:t,component_name:l,selectComponent:a,updateConfig:n,saveComponentConfig:r,blocked:o,skip_component:i}=e;return 0==Object.entries(t[l].components[t[l].selected].config).length&&i?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"divider text-text-alt-verba flex-grow text-xs lg:text-sm",children:[(0,s.jsxs)("p",{children:[t[l].selected," Settings"]}),(0,s.jsx)(w,{title:"Save",onClick:()=>{r(l,t[l].selected,t[l].components[t[l].selected])}})]})}),!i&&(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw] lg:text-base text-sm",children:l}),(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:o,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(T.WMq,{size:15}),(0,s.jsx)("p",{children:t[l].selected})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow",children:Object.entries(t[l].components).filter(e=>{let[t,l]=e;return l.available}).map(e=>{let[t,n]=e;return(0,s.jsx)("li",{onClick:()=>{o||(a(l,n.name),v())},children:(0,s.jsx)("a",{children:n.name})},"ComponentDropdown_"+n.name)})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"lg:text-sm text-xs text-text-alt-verba text-start",children:t[l].components[t[l].selected].description})]})]}),Object.entries(t[l].components[t[l].selected].config).map(e=>{let[a,r]=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba lg:text-base text-sm",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:a}),"dropdown"===r.type&&(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:o,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,s.jsx)(T.WMq,{size:15}),(0,s.jsx)("p",{children:r.value})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 max-h-[20vh] overflow-auto rounded-box z-[1] w-full p-2 shadow",children:t[l].components[t[l].selected].config[a].values.map(e=>(0,s.jsx)("li",{className:"text-sm",onClick:()=>{o||(n(l,a,e),v())},children:(0,s.jsx)("a",{children:e})},"ConfigValue"+e))})]}),"boolean"!=typeof r.value&&["text","number","password"].includes(r.type)&&(0,s.jsx)("label",{className:"input flex text-sm items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:r.type,className:"grow w-full",value:r.value,onChange:e=>{o||n(l,a,e.target.value)}})}),"boolean"!=typeof r.value&&["textarea"].includes(r.type)&&(0,s.jsx)("textarea",{className:"grow w-full text-sm min-h-[152px] bg-bg-verba rounded-lg p-2",value:r.value,onChange:e=>{o||n(l,a,e.target.value)}}),"boolean"!=typeof r.value&&"multi"==r.type&&(0,s.jsx)(eT,{component_name:l,values:r.values,config_title:a,updateConfig:n,blocked:o}),"bool"==r.type&&(0,s.jsxs)("div",{className:"flex gap-5 justify-start items-center w-full my-4",children:[(0,s.jsx)("p",{className:"lg:text-sm text-xs text-text-alt-verba text-start w-[250px]",children:r.description}),(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>{o||n(l,a,e.target.checked)},checked:"boolean"==typeof r.value&&r.value})]})]}),"bool"!=r.type&&(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba mt-3",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-xs text-text-alt-verba text-start",children:r.description})]})]},"Configuration"+a+l)})]})},eM=e=>{var t;let{selectedFileData:l,fileMap:n,selectComponent:o,updateConfig:i,saveComponentConfig:c,setFileMap:d,blocked:x,addStatusMessage:u}=e,[m,g]=(0,a.useState)(""),[f,p]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[v,j]=(0,a.useState)("");(0,a.useEffect)(()=>{l&&(g(n[l].filename),p(n[l].source),b(n[l].metadata))},[n,l]);let N=(0,a.useCallback)((e,t)=>{if(l){let s=JSON.parse(JSON.stringify(n[l]));s[e]=t;let a={...n};a[l]=s,d(a)}},[l,n,d]),y=(0,a.useCallback)(e=>{let t=e.target.value;g(t),N("filename",t)},[N]),_=(0,a.useCallback)(e=>{let t=e.target.value;p(t),N("source",t)},[N]),S=(0,a.useCallback)(e=>{let t=e.target.value;b(t),N("metadata",t)},[N]),k=e=>{if(l){let t=JSON.parse(JSON.stringify(n[l]));t.overwrite=e;let s={...n};s[l]=t,d(s)}},E=e=>{if(l&&!n[l].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(n[l]));t.labels.push(e);let s={...n};s[l]=t,d(s),j("")}},I=e=>{if(l&&n[l].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(n[l]));t.labels=t.labels.filter(t=>t!==e);let s={...n};s[l]=t,d(s),j("")}};return l?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[l&&"READY"!=n[l].status&&(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"Import Status"}),(0,s.jsx)("div",{className:"flex flex-col gap-3 text-text-verba",children:l&&Object.entries(n[l].status_report).map(e=>{let[t,l]=e;return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("p",{className:"flex min-w-[8vw] gap-2 items-center text-text-verba",children:["DONE"===l.status&&(0,s.jsx)(C.FJM,{size:15}),"ERROR"===l.status&&(0,s.jsx)(A.vVM,{size:15}),eS[l.status]]}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full ".concat(e_[l.status]," bg-bg-verba"),children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:0!=l.took?l.message+" ("+l.took+"s)":l.message,disabled:!0})})]},"Status"+t)})}),(0,s.jsx)(eF,{RAGConfig:n[l].rag_config,component_name:"Reader",selectComponent:o,updateConfig:i,skip_component:!0,saveComponentConfig:c,blocked:n[l].block}),(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:"File Settings"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Title"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:m,onChange:y,disabled:x})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add a Title to the document. If you are adding a URL, all URL will have a have their corresponding URL as filename."})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Source Link"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:f,onChange:_,disabled:x})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add a link to reference the original source of the document. You can access it through the Document Explorer via the View Source button"})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Folder Name"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:v,onChange:e=>{j(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),E(v))},disabled:x,title:v})}),(0,s.jsx)(w,{title:"Add",Icon:r.Kth,onClick:()=>{E(v)},disabled:x})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Use default folder name or change it by removing existing and adding new"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries((t=n[l]).labels).map(e=>{let[l,a]=e;return(0,s.jsx)("div",{children:(0,s.jsx)(w,{title:a,className:"btn-sm",text_class_name:"text-xs",onClick:()=>{I(a)},Icon:A.B4e})},t.fileID+l+a)})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Overwrite"}),(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>k(e.target.checked),checked:!!l&&n[l].overwrite,disabled:x})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Overwrite existing documents with the same name."})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"Metadata"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Metadata"}),(0,s.jsx)("textarea",{className:"grow w-full textarea flex items-center gap-2 max-h-64 bg-bg-verba",value:h,onChange:S,disabled:x})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add metadata to the document to improve retrieval and generation. Metadata will added to the context sent to the embedding and generation, to influcence the results."})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"File Information"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Extension"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[l].extension,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"File Size"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["B","KB","MB","GB","TB"][t])})(n[l].file_size),disabled:!0})})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-verba",children:"Ingestion Pipeline"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Reader"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[l].rag_config.Reader.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:l&&n[l].rag_config.Reader.components[n[l].rag_config.Reader.selected].description})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Chunker"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[l].rag_config.Chunker.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:l&&n[l].rag_config.Chunker.components[n[l].rag_config.Chunker.selected].description})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Embedder"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[l].rag_config.Embedder.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:l&&n[l].rag_config.Embedder.components[n[l].rag_config.Embedder.selected].description})]}),(0,s.jsx)("div",{className:"divider"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Debug"}),(0,s.jsx)(w,{Icon:eA.ZWp,onClick:()=>{let e=document.getElementById("File_Debug_Modal");e instanceof HTMLDialogElement&&e.showModal()},className:"max-w-min"})]}),(0,s.jsx)("dialog",{id:"File_Debug_Modal",className:"modal",children:(0,s.jsxs)("div",{className:"modal-box min-w-fit",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Debugging File Configuration"}),(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-xs",children:l?(()=>{let e={...n[l]};return e.content="File Content",JSON.stringify(e,null,2)})():""}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn text-text-verba bg-warning-verba border-none hover:bg-button-hover-verba ml-2",children:"Close"})})})]})})]}):(0,s.jsx)("div",{})},eL=e=>{var t;let{selectedFileData:l,fileMap:n,addStatusMessage:o,setFileMap:i,RAGConfig:c,setRAGConfig:d,setSelectedFileData:x,credentials:u}=e,[m,g]=(0,a.useState)("Basic"),f=async()=>{o("Setting current config as default","SUCCESS"),l&&(await U(n[l].rag_config,u)?d(n[l].rag_config):console.error("Failed to set RAG config:"))},p=(0,a.useCallback)((e,t,s)=>{i(a=>{if(l){let n={...a},r=n[l],o=r.rag_config[e].components[r.rag_config[e].selected].config;return"string"==typeof s||"boolean"==typeof s?o[t].value=s:o[t].values=s,n}return a})},[l]),h=(e,t)=>{i(s=>{if(l){let a=JSON.parse(JSON.stringify(s[l])),n=JSON.parse(JSON.stringify(s[l].rag_config));n[e].selected=t,a.rag_config=n;let r={...s};return r[l]=a,r}return s})},b=(0,a.useCallback)(async(e,t,l)=>{if(!c)return;o("Saving "+t+" config","SUCCESS");let s=JSON.parse(JSON.stringify(c));s[e].selected=t,s[e].components[t]=l,await U(s,u)&&d(s)},[c,u]);return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(eg,{tooltip_text:"Configure all import settings related to chunking, embedding, adding meta data and more. You can save made changes individually or apply them to all other files",display_text:"Import Config"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)(w,{title:"Overview",selected:"Basic"===m,selected_color:"bg-secondary-verba",onClick:()=>{g("Basic")},Icon:r.zfW}),(0,s.jsx)(w,{title:"Config",selected:"Pipeline"===m,selected_color:"bg-secondary-verba",onClick:()=>{g("Pipeline")},Icon:C.KOq}),(0,s.jsx)(w,{onClick:()=>{x(null)},Icon:A.B4e})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:["Basic"===m&&(0,s.jsx)(eM,{selectedFileData:l,addStatusMessage:o,fileMap:n,selectComponent:h,updateConfig:p,saveComponentConfig:b,setFileMap:i,blocked:l?null!==(t=n[l].block)&&void 0!==t&&t:void 0}),"Pipeline"===m&&l&&(0,s.jsxs)("div",{className:"flex flex-col gap-10 w-full",children:[(0,s.jsx)(eF,{RAGConfig:n[l].rag_config,component_name:"Chunker",selectComponent:h,updateConfig:p,saveComponentConfig:b,blocked:n[l].block,skip_component:!1}),(0,s.jsx)(eF,{RAGConfig:n[l].rag_config,component_name:"Embedder",selectComponent:h,updateConfig:p,saveComponentConfig:b,blocked:n[l].block,skip_component:!1})]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)(w,{title:"Apply to All",onClick:()=>{let e=document.getElementById("apply_setting_to_all");e instanceof HTMLDialogElement&&e.showModal()},Icon:eO.HL_}),(0,s.jsx)(w,{title:"Save Config",onClick:()=>{let e=document.getElementById("set_default_settings");e instanceof HTMLDialogElement&&e.showModal()},Icon:r.zfW}),(0,s.jsx)(w,{title:"Reset",onClick:()=>{let e=document.getElementById("reset_Setting");e instanceof HTMLDialogElement&&e.showModal()},Icon:A.B4e})]})}),(0,s.jsx)(ej,{modal_id:"apply_setting_to_all",title:"Apply Pipeline Settings",text:"Apply Pipeline Settings to all files?",triggerString:"Apply",triggerValue:null,triggerAccept:()=>{o("Applying config to all files","INFO"),i(e=>{if(l){let t=JSON.parse(JSON.stringify(e[l].rag_config)),s={...e};for(let a in e){let n=JSON.parse(JSON.stringify(e[a]));n.rag_config=t,n.source=e[l].source,n.labels=e[l].labels,n.overwrite=e[l].overwrite,s[a]=n}return s}return e})}}),(0,s.jsx)(ej,{modal_id:"reset_Setting",title:"Reset Setting",text:"Reset pipeline settings of this file?",triggerString:"Reset",triggerValue:null,triggerAccept:()=>{o("Resetting pipeline settings","WARNING"),i(e=>{if(l&&c){let t={...e},s=JSON.parse(JSON.stringify(e[l]));return s.rag_config=c,t[l]=s,t}return e})}}),(0,s.jsx)(ej,{modal_id:"set_default_settings",title:"Set Default",text:"Set current pipeline settings as default for future files?",triggerString:"Set",triggerValue:null,triggerAccept:f})]})},ez=e=>{let{credentials:t,RAGConfig:l,setRAGConfig:n,addStatusMessage:r}=e,[o,i]=(0,a.useState)({}),[c,d]=(0,a.useState)(null),[x,u]=(0,a.useState)(!1),[m,g]=(0,a.useState)(null),[f,p]=(0,a.useState)("OFFLINE");(0,a.useEffect)(()=>{u(!0)},[]),(0,a.useEffect)(()=>{let e=j(),t=new WebSocket(e);return t.onopen=()=>{console.log("Import WebSocket connection opened to "+e),p("ONLINE")},t.onmessage=e=>{p("ONLINE");try{let t=JSON.parse(e.data);"new_file_id"in t?i(e=>{let l={...e};return l[t.new_file_id]={...l[t.original_file_id],fileID:t.new_file_id,filename:t.filename,block:!0},l}):b(t)}catch(t){console.error("Received data is not valid JSON:",e.data);return}},t.onerror=e=>{console.error("Import WebSocket Error:",e),p("OFFLINE"),h(),u(e=>!e)},t.onclose=e=>{p("OFFLINE"),h(),e.wasClean?console.log("Import WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),u(e=>!e)},g(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[x]);let h=()=>{i(e=>{if(o){let t={...e};for(let e in t)"DONE"!=t[e].status&&"ERROR"!=t[e].status&&"READY"!=t[e].status&&(t[e].status="ERROR",t[e].status_report.ERROR={fileID:e,status:"ERROR",message:"Connection was interrupted",took:0});return t}return e})},b=e=>{"DONE"===e.status&&r("File "+e.fileID+" imported","SUCCESS"),"ERROR"===e.status&&r("File "+e.fileID+" import failed","ERROR"),i(t=>{if(e&&e.fileID in t){let l=JSON.parse(JSON.stringify(t[e.fileID])),s={...t};return l.status=e.status,l.status_report[e.status]=e,s[e.fileID]=l,s}return t})},v=e=>{i(t=>{if(e in t){let l=JSON.parse(JSON.stringify(t[e])),s={...t};return l.status="WAITING",Object.entries(l.status_report).length>0&&(l.status_report={}),s[e]=l,s}return t})},w=(e,l)=>{if((null==m?void 0:m.readyState)===WebSocket.OPEN){v(l);let s=[],a=0;for(;a<e.length;){let t=e.slice(a,a+2e3);s.push(t),a+=2e3}let n=s.length;s.forEach((e,s)=>{m.send(JSON.stringify({chunk:e,isLastChunk:s===n-1,total:n,order:s,fileID:l,credentials:t}))})}else console.error("WebSocket is not open. ReadyState:",null==m?void 0:m.readyState),u(e=>!e)};return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(c?"hidden md:flex md:w-[45vw]":"w-full md:w-[45vw] md:flex"),children:(0,s.jsx)(eR,{fileMap:o,addStatusMessage:r,setFileMap:i,RAGConfig:l,setRAGConfig:n,selectedFileData:c,setSelectedFileData:d,importSelected:()=>{r("Importing selected file","INFO"),c&&["READY","DONE","ERROR"].includes(o[c].status)&&!o[c].block&&w(JSON.stringify(o[c]),c)},importAll:()=>{for(let e in r("Importing all files","INFO"),o)["READY","DONE","ERROR"].includes(o[e].status)&&!o[e].block&&w(JSON.stringify(o[e]),e)},socketStatus:f,reconnect:()=>{u(e=>!e)}})}),(0,s.jsx)("div",{className:"".concat(c?"md:w-[55vw] w-full flex":"hidden md:flex md:w-[55vw]"),children:c&&(0,s.jsx)(eL,{addStatusMessage:r,selectedFileData:c,RAGConfig:l,credentials:t,setRAGConfig:n,fileMap:o,setFileMap:i,setSelectedFileData:d})})]})},eP=l(34673),eG=l(21789),eJ=(l(91997),l(73207));let eB="";eB="/static";let eU=e=>{let{color:t,useMaterial:l,model_path:n}=e,r=(0,eP.L)(eB+n),o=(0,a.useMemo)(()=>new O.MeshMatcapMaterial({color:"#e6e6e6",matcap:new O.TextureLoader().load(eB+"/ice_cap.png")}),[]);return(0,a.useMemo)(()=>new O.MeshPhysicalMaterial({metalness:.4,roughness:.4,color:"#ffe229",ior:1,thickness:1,transparent:!1,wireframe:!1,clearcoat:1,clearcoatRoughness:0}),[]),(0,a.useEffect)(()=>{},[o]),(0,a.useEffect)(()=>{r.scene.traverse(e=>{e instanceof O.Mesh&&(l?(e.material.roughness=.3,e.material.metalness=.2):e.material=o,e.castShadow=!0,e.receiveShadow=!0)})},[r,o]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("color",{args:[t],attach:"background"}),(0,s.jsx)(eG.N,{global:!0,rotation:[.13,.1,0],polar:[-.4,.2],azimuth:[-1,.75],config:{mass:2,tension:400},snap:{mass:4,tension:400},children:(0,s.jsx)(D.b,{speed:2,rotationIntensity:1,children:(0,s.jsx)("primitive",{object:r.scene,"position-y":0,"position-x":0,"rotation-y":.2,"rotation-x":-.2,"position-z":0,scale:.6})})})]})};var eW=e=>{let{credentials:t,setCredentials:l,setSelectedTheme:n,setThemes:r,setIsLoggedIn:o,production:i,setRAGConfig:c}=e,[d,x]=(0,a.useState)(!0),[u,m]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!0),[p,h]=(0,a.useState)(""),[b,v]=(0,a.useState)("Local"),[j,N]=(0,a.useState)(t.url),[y,_]=(0,a.useState)(t.key),[S,k]=(0,a.useState)("8080");(0,a.useEffect)(()=>{let e=setTimeout(()=>{x(!1)},300);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{t.default_deployment&&(v(t.default_deployment),I(t.default_deployment))},[t]);let I=async e=>{h(""),m(!0);let s=await J(e,j,y,S);s&&("error"in s?!1==s.connected?(o(!1),h(""==s.error?"Couldn't connect to Weaviate":s.error)):(o(!0),l({deployment:e,key:y,url:j,default_deployment:t.default_deployment}),c(s.rag_config),s.themes&&r(s.themes),s.theme&&n(s.theme)):(o(!1),h(JSON.stringify(s)))),m(!1)};return(0,s.jsx)("div",{className:"w-screen h-screen bg-white",children:(0,s.jsxs)("div",{className:"flex w-full h-full transition-opacity duration-1000 ".concat(d?"opacity-0":"opacity-100"),children:[(0,s.jsx)("div",{className:"hidden md:flex md:w-1/2 lg:w-3/5 h-full",children:(0,s.jsxs)(E.Xz,{camera:{position:[0,0,4],fov:50},className:"w-full h-full touch-none",children:[(0,s.jsx)("color",{attach:"background",args:["#FAFAFA"]}),(0,s.jsx)("ambientLight",{intensity:.5}),(0,s.jsx)("directionalLight",{castShadow:!0,position:[-1,1,1],intensity:1,"shadow-mapSize":1024}),(0,s.jsx)("directionalLight",{castShadow:!0,position:[1,1,-1],intensity:1,"shadow-mapSize":1024}),(0,s.jsx)("directionalLight",{castShadow:!0,position:[0,1,1],intensity:1,"shadow-mapSize":1024}),(0,s.jsx)(eU,{color:"#FAFAFA",useMaterial:"Local"!=i,model_path:"Local"==i?"/verba.glb":"/weaviate.glb"})]})}),(0,s.jsx)("div",{className:"w-full md:flex md:w-1/2 lg:w-2/5 h-full flex justify-center items-center p-5",children:(0,s.jsxs)("div",{className:"flex flex-col gap-8 items-center md:items-start justify-center w-4/5",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center md:items-start gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("p",{className:"font-light text-3xl md:text-4xl text-text-alt-verba",children:"Welcome to"}),(0,s.jsx)("p",{className:"font-light text-3xl md:text-4xl text-text-verba",children:"Verba"})]}),"Local"==i&&(0,s.jsx)("p",{className:"text-text-verba text-base lg:text-lg ",children:"Choose your deployment"})]}),g?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:["Local"==i&&(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-2 w-full",children:[(0,s.jsx)(w,{Icon:C.i1q,title:"Weaviate",disabled:u,onClick:()=>{f(!1),v("Weaviate")}}),(0,s.jsx)(w,{title:"Docker",Icon:C.X2n,disabled:u,onClick:()=>{v("Docker"),I("Docker")},loading:u&&"Docker"==b}),(0,s.jsx)(w,{title:"Custom",Icon:ep.Y6Z,disabled:u,onClick:()=>{v("Custom"),f(!1)},loading:u&&"Custom"==b}),(0,s.jsx)(w,{title:"Local",Icon:C.bHw,disabled:u,onClick:()=>{v("Local"),I("Local")},loading:u&&"Local"==b})]}),"Demo"==i&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsx)(w,{Icon:eh.drw,title:"Start Demo",disabled:u,onClick:()=>{v("Weaviate"),I("Weaviate")},loading:u&&"Weaviate"==b})}),"Production"==i&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsx)(w,{Icon:eh.drw,title:"Start Verba",onClick:()=>{f(!1),v("Weaviate")}})})]}):(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:"Demo"!=i&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),I(b)},children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md w-full bg-bg-verba",children:[(0,s.jsx)(C.i1q,{className:"text-text-alt-verba"}),(0,s.jsx)("input",{type:"text",name:"username",value:j,onChange:e=>N(e.target.value),placeholder:"Weaviate URL",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full",autoComplete:"username"})]}),"Custom"==b&&(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-xs",children:"Port"}),(0,s.jsx)("input",{type:"text",name:"Port",value:S,onChange:e=>k(e.target.value),placeholder:"Port",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full",autoComplete:"port"})]})]}),(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba mt-4",children:[(0,s.jsx)(C.q2z,{className:"text-text-alt-verba"}),(0,s.jsx)("input",{type:"password",name:"current-password",value:y,onChange:e=>_(e.target.value),placeholder:"API Key",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full",autoComplete:"current-password"})]}),(0,s.jsx)("div",{className:"flex justify-between gap-4 mt-4",children:(0,s.jsx)("div",{className:"flex flex-col w-full gap-2",children:(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-2 w-full",children:[(0,s.jsx)(w,{Icon:eJ.y4s,title:"Connect to Weaviate",type:"submit",selected:!0,selected_color:"bg-primary-verba",loading:u}),"Weaviate"==b&&(0,s.jsx)(w,{Icon:eA.$Wy,title:"Register",type:"button",disabled:u,onClick:()=>window.open("https://console.weaviate.cloud","_blank")}),(0,s.jsx)(w,{Icon:C.asE,title:"Back",type:"button",text_size:"text-xs",icon_size:12,onClick:()=>f(!0),disabled:u})]})})})]})})}),p&&(0,s.jsx)("div",{className:"bg-warning-verba p-4 rounded w-full h-full overflow-auto",children:(0,s.jsx)("p",{className:"flex w-full h-full whitespace-pre-wrap",children:p})})]})})]})})},eV=l(93850),eq=e=>{let{RAGConfig:t,setRAGConfig:l,addStatusMessage:n,onSave:o,credentials:i,onReset:c,production:d}=e,x=(e,t,s)=>{l(l=>{if(l){let a={...l};return"string"==typeof s||"boolean"==typeof s?a[e].components[a[e].selected].config[t].value=s:a[e].components[a[e].selected].config[t].values=s,a}return l})},u=(e,t)=>{l(l=>{if(l){let s={...l};return s[e].selected=t,s}return l})},m=(0,a.useCallback)(async(e,s,a)=>{if(!t)return;n("Saving "+s+" Config","SUCCESS");let r=JSON.parse(JSON.stringify(t));r[e].selected=s,r[e].components[s]=a,await U(r,i)&&l(r)},[t,i]);return t?(0,s.jsxs)("div",{className:"flex flex-col justify-start rounded-2xl w-full p-4 ",children:[(0,s.jsx)("div",{className:"sticky flex flex-col gap-2 w-full top-0 z-20 justify-end",children:(0,s.jsxs)("div",{className:"flex justify-end w-full gap-2 p-4 bg-bg-alt-verba rounded-lg",children:[(0,s.jsx)(w,{Icon:r.zfW,title:"Save Config",onClick:o,disabled:"Demo"==d}),(0,s.jsx)(w,{Icon:A.B4e,title:"Reset",onClick:c,disabled:"Demo"==d})]})}),(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl w-full p-6 ",children:[(0,s.jsx)(eF,{RAGConfig:t,component_name:"Embedder",selectComponent:u,updateConfig:x,saveComponentConfig:m,blocked:"Demo"==d}),(0,s.jsx)(eF,{RAGConfig:t,component_name:"Generator",selectComponent:u,updateConfig:x,saveComponentConfig:m,blocked:"Demo"==d}),(0,s.jsx)(eF,{RAGConfig:t,component_name:"Retriever",selectComponent:u,updateConfig:x,saveComponentConfig:m,blocked:"Demo"==d})]})]}):(0,s.jsx)("div",{})},eH=e=>{let{message:t,selectedTheme:l,selectedDocument:a,setSelectedDocument:n,message_index:o,setSelectedDocumentScore:i,setSelectedChunkScore:c}=e;return"string"==typeof t.content?(0,s.jsx)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"flex flex-col items-start p-5 rounded-3xl animate-press-in text-sm lg:text-base ".concat({user:"bg-bg-verba",system:"bg-bg-alt-verba",error:"bg-warning-verba",retrieval:"bg-bg-verba"}[t.type]),children:[t.cached&&(0,s.jsx)(C.i1q,{size:12,className:"text-text-verba"}),"system"===t.type&&(0,s.jsx)(ec.D,{className:"prose md:prose-sm lg:prose-base p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:a,className:n,children:r,...o}=e,i=/language-(\w+)/.exec(n||"");return!a&&i?(0,s.jsx)(ed.Z,{style:"dark"===l.theme?ex.vk:ex.Yn,language:i[1],PreTag:"div",...o,children:String(r).replace(/\n$/,"")}):(0,s.jsx)("code",{className:n,...o,children:r})}},children:t.content}),"user"===t.type&&(0,s.jsx)("div",{className:"whitespace-pre-wrap",children:t.content}),"error"===t.type&&(0,s.jsxs)("div",{className:"whitespace-pre-wrap flex items-center gap-2 text-sm text-text-verba",children:[(0,s.jsx)(eV.I2T,{size:15}),(0,s.jsx)("p",{children:t.content})]})]})}):(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3 w-full items-center",children:[t.content.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{n(e.uuid),i(e.uuid+e.score+e.chunks.length),c(e.chunks)},className:"flex ".concat(a&&a===e.uuid+e.score+e.chunks.length?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba"," rounded-3xl p-3 items-center justify-between transition-colors duration-300 ease-in-out border-none"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)("p",{className:"text-xs flex-grow truncate mr-2",title:e.title,children:e.title}),(0,s.jsxs)("div",{className:"flex gap-1 items-center text-text-verba flex-shrink-0",children:[(0,s.jsx)(r.$Kz,{size:12}),(0,s.jsx)("p",{className:"text-sm",children:e.chunks.length})]})]})},"Retrieval"+e.title+t)),(0,s.jsx)(w,{Icon:r.s59,className:"btn-sm btn-square",onClick:()=>document.getElementById("context-modal-"+o).showModal()}),(0,s.jsx)("dialog",{id:"context-modal-"+o,className:"modal",children:(0,s.jsxs)("div",{className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Context"}),(0,s.jsx)("p",{className:"py-4",children:t.context}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn focus:outline-none text-text-alt-verba bg-button-verba hover:bg-button-hover-verba hover:text-text-verba border-none shadow-none",children:(0,s.jsx)("p",{children:"Close"})})})})]})})]})},eY=e=>{let{production:t,credentials:l,setSelectedDocument:n,setSelectedChunkScore:i,currentPage:c,RAGConfig:d,selectedTheme:x,setRAGConfig:u,addStatusMessage:m,documentFilter:g,setDocumentFilter:f}=e,[p,h]=(0,a.useState)("Chat"),v=(0,a.useRef)(!1),[j,N]=(0,a.useState)("DONE"),[y,_]=(0,a.useState)(""),[S,k]=(0,a.useState)(null),[E,I]=(0,a.useState)(!1),[D,R]=(0,a.useState)(!1),[O,T]=(0,a.useState)([]),[F,M]=(0,a.useState)([]),[L,z]=(0,a.useState)([]),[P,G]=(0,a.useState)(null),[J,W]=(0,a.useState)(0),[q,K]=(0,a.useState)(""),[X,$]=(0,a.useState)([]),[Z,Q]=(0,a.useState)(!1),ee=d?d.Embedder.components[d.Embedder.selected].config.Model.value:"No Config found";(0,a.useState)("No Embedding Model"),(0,a.useEffect)(()=>{R(!0)},[]),(0,a.useEffect)(()=>{d?eo():W(0)},[ee,c,g]),(0,a.useEffect)(()=>{$(e=>0===e.length?[{type:"system",content:x.intro_message.text}]:e)},[x.intro_message.text]),(0,a.useEffect)(()=>{let e=b(),t=new WebSocket(e);return t.onopen=()=>{console.log("WebSocket connection opened to "+e),I(!0)},t.onmessage=e=>{let t;if(!v.current){_("");return}try{t=JSON.parse(e.data)}catch(t){console.error("Received data is not valid JSON:",e.data);return}let l=t.message;if(_(e=>e+l),"stop"===t.finish_reason){v.current=!1,N("DONE"),m("Finished generation","SUCCESS");let e=t.full_text;if(t.cached){let l=t.distance;$(t=>[...t,{type:"system",content:e,cached:!0,distance:l}])}else $(t=>[...t,{type:"system",content:e}]);_("")}},t.onerror=e=>{console.error("WebSocket Error:",e),I(!1),v.current=!1,N("DONE"),R(e=>!e)},t.onclose=e=>{e.wasClean?console.log("WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),I(!1),v.current=!1,N("DONE"),R(e=>!e)},k(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[D]),(0,a.useEffect)(()=>{d?eo():W(0)},[d]);let et=async()=>{let e=await B(l);e?u(e.rag_config):m("Failed to fetch RAG Config","ERROR")},el=async()=>{if(!v.current&&q.trim()){K(""),v.current=!0,T([]),N("CHUNKS"),$(e=>[...e,{type:"user",content:q}]);try{m("Sending query...","INFO");let e=await V(q,d,L,g,l);!e||e.error?es(e?e.error:"No data received"):en(e,q)}catch(e){es("Failed to fetch from API"),console.error("Failed to fetch from API:",e)}}},es=e=>{m("Query failed","ERROR"),$(t=>[...t,{type:"error",content:e}]),v.current=!1,N("DONE")},en=(e,t)=>{if($(t=>[...t,{type:"retrieval",content:e.documents,context:e.context}]),m("Received "+Object.entries(e.documents).length+" documents","SUCCESS"),e.documents.length>0){let l=e.documents[0];n(l.uuid),G("".concat(l.uuid).concat(l.score).concat(l.chunks.length)),i(l.chunks),e.context&&(er(t,e.context),N("RESPONSE"))}else es("We couldn't find any chunks to your query")},er=(e,t)=>{if((null==S?void 0:S.readyState)===WebSocket.OPEN){let l=JSON.stringify({query:e,context:t,conversation:X.slice(1).filter(e=>"user"===e.type||"system"===e.type).map(e=>({type:e.type,content:e.content})),rag_config:d});S.send(l)}else console.error("WebSocket is not open. ReadyState:",null==S?void 0:S.readyState)},eo=async()=>{try{let e=await H(ee,g,l),t=await Y(l);e&&W(e.datacount),t&&M(t.labels)}catch(e){console.error("Failed to fetch from API:",e),m("Failed to fetch datacount: "+e,"ERROR")}},ei=async()=>{m("Saved Config","SUCCESS"),await U(d,l)},ec=async()=>{m("Reset Config","WARNING"),et()},ed=async()=>{if(d&&d.Retriever.components[d.Retriever.selected].config.Suggestion.value){let e=await ea(q,3,l);e&&T(e.suggestions)}};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-3 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"hidden md:flex gap-2 justify-start items-center",children:(0,s.jsx)(eg,{tooltip_text:"Use the Chat interface to interact with your data and perform Retrieval Augmented Generation (RAG). This interface allows you to ask questions, analyze sources, and generate responses based on your stored documents.",display_text:"Chat"})}),(0,s.jsxs)("div",{className:"w-full md:w-fit flex gap-3 justify-end items-center",children:[(0,s.jsx)(w,{title:"Chat",Icon:r.utr,onClick:()=>{h("Chat")},selected:"Chat"===p,disabled:!1,selected_color:"bg-secondary-verba"}),"Demo"!=t&&(0,s.jsx)(w,{title:"Config",Icon:C.KOq,onClick:()=>{h("Config")},selected:"Config"===p,disabled:!1,selected_color:"bg-secondary-verba"})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col h-[50vh] md:h-full w-full overflow-y-auto overflow-x-hidden relative",children:["Chat"==p&&(0,s.jsxs)("div",{className:"sticky flex flex-col gap-2 top-0 z-9 p-4 backdrop-blur-sm bg-opacity-30 bg-bg-alt-verba rounded-lg",children:[(0,s.jsxs)("div",{className:"flex gap-2 justify-start items-center",children:[(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,children:(0,s.jsx)(w,{title:"Label",className:"btn-sm min-w-min",icon_size:12,text_class_name:"text-xs",Icon:o.Lgw,selected:!1,disabled:!1})}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:F.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>{L.includes(e)||z([...L,e]);let t=document.activeElement;t.blur();let l=t.closest(".dropdown");l&&l.blur()},children:e})},"Label"+t))})]})}),(L.length>0||g.length>0)&&(0,s.jsx)(w,{onClick:()=>{z([]),f([])},title:"Clear",className:"btn-sm max-w-min",icon_size:12,text_class_name:"text-xs",Icon:A.B4e,selected:!1,disabled:!1})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[L.map((e,t)=>(0,s.jsx)(w,{title:e,Icon:A.B4e,className:"btn-sm min-w-min max-w-[200px]",icon_size:12,selected_color:"bg-primary-verba",selected:!0,text_class_name:"truncate max-w-[200px]",text_size:"text-xs",onClick:()=>{z(L.filter(t=>t!==e))}},"FilterLabel"+t)),g.map((e,t)=>(0,s.jsx)(w,{title:e.title,Icon:A.B4e,className:"btn-sm min-w-min max-w-[200px]",icon_size:12,selected_color:"bg-secondary-verba",selected:!0,text_size:"text-xs",text_class_name:"truncate md:max-w-[100px] lg:max-w-[150px]",onClick:()=>{f(g.filter(t=>t.uuid!==e.uuid))}},"DocumentFilter"+t))]})]}),(0,s.jsxs)("div",{className:"".concat("Chat"===p?"flex flex-col gap-3 p-4":"hidden"),children:[(0,s.jsxs)("div",{className:"flex w-full justify-start items-center text-text-alt-verba gap-2",children:[0===J&&(0,s.jsx)(eV.I2T,{size:15}),0===J&&(0,s.jsx)("p",{className:"text-text-alt-verba text-sm items-center flex",children:"".concat(J," documents embedded by ").concat(ee)})]}),X.map((e,t)=>(0,s.jsx)("div",{className:"".concat("user"===e.type?"text-right":""),children:(0,s.jsx)(eH,{message:e,message_index:t,selectedTheme:x,selectedDocument:P,setSelectedDocumentScore:G,setSelectedDocument:n,setSelectedChunkScore:i})},"Message_"+t)),y&&(0,s.jsx)(eH,{message:{type:"system",content:y,cached:!1},message_index:-1,selectedTheme:x,selectedDocument:P,setSelectedDocumentScore:G,setSelectedDocument:n,setSelectedChunkScore:i}),v.current&&(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-text-alt-verba loading loading-dots loading-md"}),(0,s.jsxs)("p",{className:"text-text-alt-verba",children:["CHUNKS"===j&&"Retrieving...","RESPONSE"===j&&"Generating..."]}),(0,s.jsx)("button",{onClick:()=>{N("DONE"),v.current=!1},className:"btn btn-circle btn-sm bg-bg-alt-verba hover:bg-warning-verba hover:text-text-verba text-text-alt-verba shadow-none border-none text-sm",children:(0,s.jsx)(A.B4e,{size:15})})]})})]}),"Config"===p&&(0,s.jsx)(eq,{addStatusMessage:m,production:t,RAGConfig:d,credentials:l,setRAGConfig:u,onReset:ec,onSave:ei})]}),(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:E?(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-end w-full relative",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("textarea",{className:"textarea textarea-bordered w-full bg-bg-verba placeholder-text-alt-verb min-h min-h-[40px] max-h-[150px] overflow-y-auto",placeholder:J>0?J>=100?"Chatting with more than 100 documents...":"Chatting with ".concat(J," documents..."):"No documents detected...",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||Z||(e.preventDefault(),el())},onCompositionStart:()=>{Q(!0)},onCompositionEnd:()=>{Q(!1)},value:q,onChange:e=>{let t=e.target.value;K(t),(t.length-1)%3==0&&ed()}}),O.length>0&&(0,s.jsx)("ul",{className:"absolute flex gap-2 justify-between top-full left-0 w-full mt-2 z-10 max-h-40 overflow-y-auto",children:O.map((e,t)=>(0,s.jsx)("li",{className:"p-3 bg-button-verba hover:bg-secondary-verba text-text-alt-verba rounded-xl w-full hover:text-text-verba cursor-pointer",onClick:()=>{K(e.query),T([])},children:(0,s.jsx)("p",{className:"text-xs lg:text-sm",children:e.query.length>50?e.query.substring(0,50)+"...":e.query.split(RegExp("(".concat(q,")"),"gi")).map((e,t)=>e.toLowerCase()===q.toLowerCase()?(0,s.jsx)("strong",{children:e},t):e)})},t))})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center",children:[(0,s.jsx)(w,{type:"button",Icon:o.OUD,onClick:()=>{el()},disabled:!1,selected_color:"bg-primary-verba"}),(0,s.jsx)(w,{type:"button",Icon:A.Ffb,onClick:()=>{n(null),i([]),K(""),G(null),T([]),$([{type:"system",content:x.intro_message.text}])},disabled:!1,selected_color:"bg-primary-verba"})]})]}):(0,s.jsx)("div",{className:"flex gap-2 items-center justify-end w-full",children:(0,s.jsxs)("button",{onClick:()=>{R(e=>!e)},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2 items-center",children:[(0,s.jsx)(ep.Nwf,{size:15}),(0,s.jsx)("p",{children:"Reconnecting..."}),(0,s.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})})]})},eK=e=>{let{credentials:t,selectedTheme:l,addStatusMessage:n,production:r,currentPage:o,RAGConfig:i,setRAGConfig:c,documentFilter:d,setDocumentFilter:x}=e,[u,m]=(0,a.useState)(null),[g,f]=(0,a.useState)([]);return(0,s.jsxs)("div",{className:"flex md:flex-row flex-col justify-center gap-3 h-[50vh] md:h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(u?"hidden md:flex md:w-[45vw]":"w-full md:w-[45vw] md:flex"),children:(0,s.jsx)(eY,{addStatusMessage:n,production:r,credentials:t,selectedTheme:l,setSelectedDocument:m,setSelectedChunkScore:f,currentPage:o,RAGConfig:i,setRAGConfig:c,documentFilter:d,setDocumentFilter:x})}),(0,s.jsx)("div",{className:"".concat(u?"md:w-[55vw] w-full flex":"hidden md:flex md:w-[55vw]"),children:(0,s.jsx)(ev,{addStatusMessage:n,credentials:t,production:r,documentFilter:d,setDocumentFilter:x,setSelectedDocument:m,selectedTheme:l,selectedDocument:u,chunkScores:g})})]})},eX=l(22034),e$=l(73478),eZ=e=>{let{selectedTheme:t,setThemes:l,credentials:n,setSelectedTheme:r,themes:o,addStatusMessage:i}=e,[c,d]=(0,a.useState)(""),x=async()=>{await W(o,t,n),i("Changes to ".concat(t.theme_name," saved"),"SUCCESS")},u=(e,t)=>{r(l=>{let s=l[e];if("text"===s.type)return{...l,[e]:{...s,text:t}};if("image"===s.type)return{...l,[e]:{...s,src:t}};if("check"===s.type)return{...l,[e]:{...s,checked:t}};if("color"===s.type)return{...l,[e]:{...s,color:t}};if("select"===s.type)return{...l,[e]:{...s,value:t}};if("number"===s.type)return{...l,[e]:{...s,value:t}};return l})};(0,a.useEffect)(()=>{l(e=>{let l={...e};return l[t.theme_name]=t,l})},[t]);let m=(e,t)=>{if(t.target.files&&t.target.files[0]){let l=new FileReader;l.onload=t=>{var l;"string"==typeof(null===(l=t.target)||void 0===l?void 0:l.result)&&u(e,t.target.result)},l.readAsDataURL(t.target.files[0])}},g=(e,l)=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:l.description}),"text"===l.type&&(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full border-none bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",placeholder:e,value:t[e].text,onChange:t=>u(e,t.target.value)})}),"select"===l.type&&(0,s.jsx)("select",{value:t[e].value,onChange:t=>{u(e,t.target.value)},className:"select bg-bg-verba",children:l.options.map(e=>(0,s.jsx)("option",{value:e,children:e},"Select_"+e))}),"color"===l.type&&(0,s.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh] z-10",children:[(0,s.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow",placeholder:e,value:t[e].color,onChange:t=>{u(e,t.target.value)}})}),(0,s.jsx)(e$.gW,{color:t[e].color,className:"z-1",onChange:t=>{u(e,t)}})]}),"image"===l.type&&(0,s.jsxs)("div",{className:"flex justify-between gap-4 w-full items-center",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("label",{className:"input flex items-center text-text-verba gap-2 w-full border-none bg-bg-verba",children:(0,s.jsx)("input",{type:"text",className:"grow",placeholder:"Enter image URL",value:c,onChange:e=>d(e.target.value)})})}),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(w,{title:"Set Link",onClick:()=>u(e,c)}),(0,s.jsx)(w,{title:"Upload Image",onClick:()=>{var t;return null===(t=document.getElementById("".concat(e,"ImageInput")))||void 0===t?void 0:t.click()}}),(0,s.jsx)("input",{id:"".concat(e,"ImageInput"),type:"file",accept:"image/*",onChange:t=>m(e,t),className:"hidden"})]}),t[e].src&&(0,s.jsx)("img",{src:t[e].src,alt:"".concat(e," preview"),className:"max-w-full max-h-32 rounded-xl"})]})]})]})},e);return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Customize Theme"}),(0,s.jsx)("select",{className:"select bg-bg-verba",value:Object.keys(o).find(e=>o[e]===t)||"",onChange:e=>r(o[e.target.value]),children:Object.keys(o).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"gap-4 flex flex-col p-4",children:[(0,s.jsx)("p",{className:"font-bold",children:"Customize Logo"}),Object.entries(t).filter(e=>{let[t,l]=e;return"image"===l.type}).map(e=>{let[t,l]=e;return g(t,l)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Text"}),Object.entries(t).filter(e=>{let[t,l]=e;return"text"===l.type}).map(e=>{let[t,l]=e;return g(t,l)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Font"}),Object.entries(t).filter(e=>{let[t,l]=e;return"select"===l.type}).map(e=>{let[t,l]=e;return g(t,l)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Color"}),Object.entries(t).filter(e=>{let[t,l]=e;return"color"===l.type}).map(e=>{let[t,l]=e;return g(t,l)})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,s.jsx)(w,{title:"Save",onClick:x,className:"max-w-min",Icon:C.FJM}),(0,s.jsx)(w,{title:"Reset",onClick:()=>{l({Light:eC,Dark:ek,Weaviate:eI,WCD:eE}),r(eI),i("Themes reset","SUCCESS")},className:"max-w-min",Icon:A.B4e})]})]})},eQ=l(80624),e0=l(59743),e2=e=>{let{credentials:t,addStatusMessage:l}=e,[n,o]=(0,a.useState)(1),[i,c]=(0,a.useState)([]),[d,x]=(0,a.useState)(0),u=async()=>{let e=await er(n,20,t);e&&(c(e.suggestions),x(e.total_count))};(0,a.useEffect)(()=>{u()},[]),(0,a.useEffect)(()=>{u()},[n]);let m=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()},g=e=>{try{let t=(0,eQ.D)(e);return(0,e0.Q)(t,{addSuffix:!0})}catch(e){return console.error("Error parsing timestamp:",e),"Invalid date"}},f=async e=>{await en(e,t),await u(),l("Suggestion deleted","SUCCESS")},p=e=>{navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard")})};return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["Manage Suggestions (",d,")"]}),(0,s.jsx)(w,{title:"Refresh",className:"max-w-min",onClick:()=>{u()},Icon:r.A$d})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsx)("div",{className:"gap-4 flex flex-col p-4 text-text-verba",children:(0,s.jsx)("div",{className:"flex flex-col gap-2",children:i.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 p-4 border-2 bg-bg-alt-verba rounded-xl",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 w-2/3",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-verba",children:g(e.timestamp)}),(0,s.jsx)("p",{className:"text-sm text-text-verba truncate max-w-full",title:e.query,children:e.query})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(w,{onClick:()=>p(e.query),Icon:r.On2}),(0,s.jsx)(w,{onClick:()=>m("remove_suggestion"+e.uuid),Icon:r.VOs})]}),(0,s.jsx)(ej,{modal_id:"remove_suggestion"+e.uuid,title:"Remove Suggestion",text:"Do you want to remove this suggestion?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:f})]},"Suggestion"+e.uuid))})})}),i.length>0&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-verba",children:[(0,s.jsx)(w,{title:"Previous Page",onClick:()=>{1==n?o(1):o(e=>e-1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:C.O18}),(0,s.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Page ",n]}),(0,s.jsx)(w,{title:"Next Page",onClick:()=>{20*n<=d?o(e=>e+1):o(1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:C.Rdr})]})]})},e1=e=>{let{credentials:t,addStatusMessage:l}=e,[n,o]=(0,a.useState)(null),[i,c]=(0,a.useState)(!1),[d,x]=(0,a.useState)(null),u=async()=>{c(!0);let e=await es(t);(null==e?void 0:e.error)===""&&(o(e.node_payload),x(e.collection_payload)),c(!1)};(0,a.useEffect)(()=>{c(!0),u(),c(!1)},[]);let m=async()=>{await el("DOCUMENTS",t)?(l("All documents reset","SUCCESS"),u()):l("Failed to reset documents","ERROR")},g=async()=>{await el("ALL",t)?(l("Verba reset","SUCCESS"),u()):l("Failed to reset Verba","ERROR")},f=async()=>{await el("CONFIG",t)?(l("Config reset","SUCCESS"),u()):l("Failed to reset config","ERROR")},p=async()=>{await el("SUGGESTIONS",t)?(l("Suggestions reset","SUCCESS"),u()):l("Failed to reset suggestions","ERROR")},h=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Admin Panel"}),(0,s.jsx)(w,{title:"Refresh",loading:i,onClick:u,className:"max-w-min",Icon:r.A$d})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"gap-4 flex flex-col p-4 text-text-verba",children:[(0,s.jsx)("p",{className:"font-bold text-lg",children:"Resetting Verba"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 justify-between",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(w,{title:"Clear Documents",onClick:()=>h("reset-documents"),Icon:r.emU}),(0,s.jsx)(w,{title:"Clear Config",onClick:()=>h("reset-configs"),Icon:C.LDL}),(0,s.jsx)(w,{title:"Clear Everything",onClick:()=>h("reset-verba"),Icon:r.VOs}),(0,s.jsx)(w,{title:"Clear Suggestions",onClick:()=>h("reset-suggestions"),Icon:r.VOs})]})}),(0,s.jsx)("p",{className:"font-bold text-lg",children:"Weaviate Information"}),(0,s.jsxs)("div",{className:"flex flex-col border-2 gap-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm lg:text-base font-semibold text-text-alt-verba",children:"Connected to"}),(0,s.jsx)("p",{className:"   text-text-verba",children:t.url})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 gap-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm lg:text-base font-semibold text-text-alt-verba",children:"Deployment"}),(0,s.jsx)("p",{className:" text-text-verba",children:t.deployment})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 gap-2 border-secondary-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm lg:text-base font-semibold text-text-alt-verba",children:"Version"}),n?(0,s.jsx)("p",{className:"text-text-verba",children:n.weaviate_version}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-sm lg:text-base font-semibold",children:"Nodes"}),n?(0,s.jsx)("p",{className:"text-text-alt-verba text-sm lg:text-base font-semibold",children:n.node_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),n?(0,s.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:n.nodes.map(e=>(0,s.jsxs)("li",{className:"text-sm text-text-verba flex justify-between",children:[(0,s.jsx)("span",{className:"w-64 truncate",children:e.name}),(0,s.jsxs)("span",{children:["(",e.status," - ",e.shards," shards)"]})]},"Node"+e.name))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-verba text-sm lg:text-base font-semibold",children:"Collections"}),d?(0,s.jsx)("p",{className:"text-text-alt-verba text-sm lg:text-base font-semibold",children:d.collection_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),d?(0,s.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:d.collections.map(e=>(0,s.jsxs)("li",{className:"text-sm text-text-verba flex justify-between",children:[(0,s.jsx)("span",{className:"w-128 truncate",children:e.name}),(0,s.jsxs)("span",{children:[e.count," objects"]})]},"Collection"+e.name))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]})]})}),(0,s.jsx)(ej,{modal_id:"reset-documents",title:"Reset Documents",text:"Are you sure you want to reset all documents? This will clear all documents and chunks from Verba.",triggerAccept:m,triggerString:"Reset"}),(0,s.jsx)(ej,{modal_id:"reset-configs",title:"Reset Config",text:"Are you sure you want to reset the config?",triggerAccept:f,triggerString:"Reset"}),(0,s.jsx)(ej,{modal_id:"reset-verba",title:"Reset Verba",text:"Are you sure you want to reset Verba? This will delete all collections related to Verba.",triggerAccept:g,triggerString:"Reset"}),(0,s.jsx)(ej,{modal_id:"reset-suggestions",title:"Reset Suggestions",text:"Are you sure you want to reset all autocomplete suggestions?",triggerAccept:p,triggerString:"Reset"})]})},e3=e=>{let{selectedTheme:t,themes:l,setThemes:n,addStatusMessage:o,setSelectedTheme:i,credentials:c}=e,[d,x]=(0,a.useState)("INFO");return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"w-1/3 flex",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-3 items-center justify-between h-min w-full",children:(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(eg,{tooltip_text:"Customize Verba's Theme, reset collections, logout or report issues.",display_text:"Settings"})})}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-3 w-full overflow-y-auto overflow-x-hidden",children:[(0,s.jsx)(w,{title:"Admin",onClick:()=>x("INFO"),selected:"INFO"===d,selected_color:"bg-secondary-verba",Icon:eX.Xn2}),(0,s.jsx)(w,{title:"Customize Theme",onClick:()=>x("THEME"),selected:"THEME"===d,selected_color:"bg-secondary-verba",Icon:C._TT}),(0,s.jsx)(w,{title:"Manage Suggestions",onClick:()=>x("SUGGESTIONS"),selected:"SUGGESTIONS"===d,selected_color:"bg-secondary-verba",Icon:r.aTL})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 w-full overflow-y-auto overflow-x-hidden",children:[(0,s.jsx)(w,{title:"Logout",onClick:()=>window.location.reload(),Icon:r.p$f}),(0,s.jsx)(w,{title:"Report Issue",onClick:()=>window.open("https://github.com/weaviate/Verba/issues/new/choose","_blank"),Icon:eV.N3m})]})]})}),(0,s.jsx)("div",{className:"w-2/3 flex",children:(0,s.jsx)("div",{className:"flex flex-col gap-2 w-full",children:(0,s.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["THEME"===d&&(0,s.jsx)(eZ,{themes:l,credentials:c,setThemes:n,setSelectedTheme:i,selectedTheme:t,addStatusMessage:o}),"INFO"===d&&(0,s.jsx)(e1,{addStatusMessage:o,credentials:c}),"SUGGESTIONS"===d&&(0,s.jsx)(e2,{credentials:c,addStatusMessage:o})]})})})]})},e4=l(34446),e5=l(24635),e8=l(54018),e9=e=>{let{status_messages:t,set_status_messages:l}=e,[n,o]=(0,a.useState)([]);(0,a.useEffect)(()=>{t.length>0&&(o(e=>[...e,...t]),l([]));let e=setInterval(()=>{let e=new Date().getTime();o(t=>t.filter(t=>e-new Date(t.timestamp).getTime()<5e3))},1e3);return()=>clearInterval(e)},[t,l]);let i=e=>{switch(e){case"INFO":default:return"bg-button-verba";case"WARNING":return"bg-secondary-verba";case"SUCCESS":return"bg-primary-verba";case"ERROR":return"bg-warning-verba"}},c=e=>{switch(e){case"INFO":default:return(0,s.jsx)(eV.hCA,{size:15});case"WARNING":return(0,s.jsx)(r.OvZ,{size:15});case"SUCCESS":return(0,s.jsx)(e8.vuX,{size:15});case"ERROR":return(0,s.jsx)(eV.yZ3,{size:15})}};return(0,s.jsx)("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:(0,s.jsx)(e4.M,{children:n.filter(e=>{let t=new Date(e.timestamp).getTime();return new Date().getTime()-t<5e3}).map((e,t)=>(0,s.jsx)(e5.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"".concat(i(e.type)," text-text-verba p-4 min-w-[300px] rounded-lg z-10 shadow-md"),children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[c(e.type),(0,s.jsx)("p",{className:"text-xs font-bold",children:e.type})]}),(0,s.jsx)("p",{className:"text-base",children:e.message})]})},t))})})};function e6(){var e;let[t,l]=(0,a.useState)("CHAT"),[r,o]=(0,a.useState)("Local"),[i,c]=(0,a.useState)(""),[d,x]=(0,a.useState)({Light:eC,Dark:ek,Weaviate:eI,WCD:eE}),[u,m]=(0,a.useState)(d.Weaviate),g=u.font.value,f=g&&(null===(e=h[g])||void 0===e?void 0:e.className)||"",[p,b]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),[y,_]=(0,a.useState)({deployment:"Local",url:"",key:"",default_deployment:""}),[C,k]=(0,a.useState)(null),[E,I]=(0,a.useState)([]),[D,R]=(0,a.useState)([]),O=(0,a.useCallback)(async()=>{try{let[e]=await Promise.all([G()]);e?(o(e.production),c(e.gtag),b(!0),_({deployment:"Local",url:e.deployments.WEAVIATE_URL_VERBA,key:e.deployments.WEAVIATE_API_KEY_VERBA,default_deployment:e.default_deployment})):(console.warn("Could not retrieve health data"),b(!1),j(!1))}catch(e){console.error("Error during initial fetch:",e),b(!1),j(!1)}},[]);(0,a.useEffect)(()=>{O()},[]),(0,a.useEffect)(()=>{if(v){let e=setTimeout(()=>{N(!0)},1e3);return()=>clearTimeout(e)}},[v]);let A=(0,a.useCallback)(()=>{var e,t,l,s,a,n,r,o,i,c,d;Object.entries({"--primary-verba":(null===(e=u.primary_color)||void 0===e?void 0:e.color)||eI.primary_color.color,"--secondary-verba":(null===(t=u.secondary_color)||void 0===t?void 0:t.color)||eI.secondary_color.color,"--warning-verba":(null===(l=u.warning_color)||void 0===l?void 0:l.color)||eI.warning_color.color,"--bg-verba":(null===(s=u.bg_color)||void 0===s?void 0:s.color)||eI.bg_color.color,"--bg-alt-verba":(null===(a=u.bg_alt_color)||void 0===a?void 0:a.color)||eI.bg_alt_color.color,"--text-verba":(null===(n=u.text_color)||void 0===n?void 0:n.color)||eI.text_color.color,"--text-alt-verba":(null===(r=u.text_alt_color)||void 0===r?void 0:r.color)||eI.text_alt_color.color,"--button-verba":(null===(o=u.button_color)||void 0===o?void 0:o.color)||eI.button_color.color,"--button-hover-verba":(null===(i=u.button_hover_color)||void 0===i?void 0:i.color)||eI.button_hover_color.color,"--text-verba-button":(null===(c=u.button_text_color)||void 0===c?void 0:c.color)||eI.button_text_color.color,"--text-alt-verba-button":(null===(d=u.button_text_alt_color)||void 0===d?void 0:d.color)||eI.button_text_alt_color.color}).forEach(e=>{let[t,l]=e;document.documentElement.style.setProperty(t,l)})},[u,d]);(0,a.useEffect)(A,[u]);let T=(e,t)=>{R(l=>[...l,{message:e,type:t,timestamp:new Date().toISOString()}])};return(0,s.jsxs)("main",{className:"min-h-screen bg-bg-verba text-text-verba min-w-screen ".concat(f),"data-theme":u.theme,children:[""!==i&&(0,s.jsx)(n.GoogleAnalytics,{gaId:i}),(0,s.jsx)(e9,{status_messages:D,set_status_messages:R}),!v&&p&&(0,s.jsx)(eW,{production:r,setSelectedTheme:m,setThemes:x,credentials:y,setIsLoggedIn:j,setRAGConfig:k,setCredentials:_}),v&&p&&(0,s.jsxs)("div",{className:"transition-opacity duration-1000 ".concat(w?"opacity-100":"opacity-0"," flex flex-col gap-2 p-5"),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(S,{production:r,title:u.title.text,subtitle:u.subtitle.text,imageSrc:u.image.src,version:"v2.0.0",currentPage:t,setCurrentPage:l}),(0,s.jsx)("div",{className:"".concat("CHAT"===t?"":"hidden"),children:(0,s.jsx)(eK,{addStatusMessage:T,credentials:y,RAGConfig:C,setRAGConfig:k,production:r,selectedTheme:u,currentPage:t,documentFilter:E,setDocumentFilter:I})}),"DOCUMENTS"===t&&(0,s.jsx)(ey,{addStatusMessage:T,credentials:y,production:r,selectedTheme:u,documentFilter:E,setDocumentFilter:I}),(0,s.jsx)("div",{className:"".concat("ADD"===t&&"Demo"!=r?"":"hidden"),children:(0,s.jsx)(ez,{RAGConfig:C,setRAGConfig:k,credentials:y,addStatusMessage:T})}),(0,s.jsx)("div",{className:"".concat("SETTINGS"===t&&"Demo"!=r?"":"hidden"),children:(0,s.jsx)(e3,{credentials:y,addStatusMessage:T,selectedTheme:u,setSelectedTheme:m,themes:d,setThemes:x})})]}),(0,s.jsx)("div",{className:"footer footer-center p-4 mt-8 bg-bg-verba text-text-alt-verba transition-all duration-1500 delay-1000",children:(0,s.jsx)("aside",{children:(0,s.jsx)("p",{children:"Build with ♥ and Weaviate \xa9 2024"})})})]}),(0,s.jsx)("img",{referrerPolicy:"no-referrer-when-downgrade",src:"https://static.scarf.sh/a.png?x-pxid=ec666e70-aee5-4e87-bc62-0935afae63ac"})]})}}},function(e){e.O(0,[596,689,520,370,465,929,582,190,400,61,652,682,306,420,636,115,949,971,23,744],function(){return e(e.s=20221)}),_N_E=e.O()}]);